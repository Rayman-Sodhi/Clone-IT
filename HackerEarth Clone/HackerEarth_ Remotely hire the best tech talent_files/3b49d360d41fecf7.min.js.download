var Demandbase=window.Demandbase||{};!function(t){"use strict";function e(t){var e=this.constructor;return this.then(function(i){return e.resolve(t()).then(function(){return i})},function(i){return e.resolve(t()).then(function(){return e.reject(i)})})}function i(t){return new this(function(e,i){function n(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var a=i.then;if("function"==typeof a){a.call(i,function(e){n(t,e)},function(i){o[t]={status:"rejected",reason:i};0==--r&&e(o)});return}}o[t]={status:"fulfilled",value:i};0==--r&&e(o)}if(!t||void 0===t.length)return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);for(var r=o.length,a=0;a<o.length;a++)n(a,o[a])})}function n(t){return Boolean(t&&void 0!==t.length)}function o(){}function r(t,e){return function(){t.apply(e,arguments)}}function a(t){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];g(t,this)}function s(t,e){for(;3===t._state;)t=t._value;if(0!==t._state){t._handled=!0;a._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var n;try{n=i(t._value)}catch(t){c(e.promise,t);return}l(e.promise,n)}else(1===t._state?l:c)(e.promise,t._value)})}else t._deferreds.push(e)}function l(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof a){t._state=3;t._value=e;u(t);return}if("function"==typeof i){g(r(i,e),t);return}}t._state=1;t._value=e;u(t)}catch(e){c(t,e)}}function c(t,e){t._state=2;t._value=e;u(t)}function u(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)s(t,t._deferreds[e]);t._deferreds=null}function d(t,e,i){this.onFulfilled="function"==typeof t?t:null;this.onRejected="function"==typeof e?e:null;this.promise=i}function g(t,e){var i=!1;try{t(function(t){if(!i){i=!0;l(e,t)}},function(t){if(!i){i=!0;c(e,t)}})}catch(t){if(i)return;i=!0;c(e,t)}}var f=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)if(n||!(o in e)){n||(n=Array.prototype.slice.call(e,0,o));n[o]=e[o]}return t.concat(n||Array.prototype.slice.call(e))},p=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i);e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),m=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=a))(function(o,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(a,s)}l((n=n.apply(t,e||[])).next())})},h=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;(r=0,a)&&(i=[2&i[0],a.value]);switch(i[0]){case 0:case 1:a=i;break;case 4:l.label++;return{value:i[1],done:!1};case 5:l.label++;r=i[1];i=[0];continue;case 7:i=l.ops.pop();l.trys.pop();continue;default:if(!(a=l.trys,a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1];a=i;break}if(a&&l.label<a[2]){l.label=a[2];l.ops.push(i);break}a[2]&&l.ops.pop();l.trys.pop();continue}i=e.call(t,l)}catch(t){i=[6,t];r=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},y=setTimeout;a.prototype.catch=function(t){return this.then(null,t)};a.prototype.then=function(t,e){var i=new this.constructor(o);s(this,new d(t,e,i));return i};a.prototype.finally=e;a.all=function(t){return new a(function(e,i){function o(t,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var s=n.then;if("function"==typeof s){s.call(n,function(e){o(t,e)},i);return}}r[t]=n;0==--a&&e(r)}catch(t){i(t)}}if(!n(t))return i(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);for(var a=r.length,s=0;s<r.length;s++)o(s,r[s])})};a.allSettled=i;a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})};a.reject=function(t){return new a(function(e,i){i(t)})};a.race=function(t){return new a(function(e,i){if(!n(t))return i(new TypeError("Promise.race accepts an array"));for(var o=0,r=t.length;o<r;o++)a.resolve(t[o]).then(e,i)})};a._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){y(t,0)};a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var t;!function(t){!function(e){e.ads=window.Demandbase.Config.ads||{};e.analytics=window.Demandbase.Config.analytics||{};e.conditions=window.Demandbase.Config.conditions||{};e.content=window.Demandbase.Config.content||{};e.forms=window.Demandbase.Config.forms||{};e.domainAPI=window.Demandbase.Config.domainAPI||{};e.segments=window.Demandbase.Config.segments||{};e.allowedDomains=window.Demandbase.Config.allowedDomains||[];e.emptyWatchDefault=window.Demandbase.Config.emptyWatchDefault||null;e.hooks=window.Demandbase.Config.hooks||{};e.isInIFrame=window.Demandbase.Config.isInIFrame||null;e.key=window.Demandbase.Config.key||null;e.logging=window.Demandbase.Config.logging||null;e.nonCompanyDefault=window.Demandbase.Config.nonCompanyDefault||null;e.nonWatchDefault=window.Demandbase.Config.nonWatchDefault||null;e.testDomain=window.Demandbase.Config.testDomain||void 0;e.testIp=window.Demandbase.Config.testIp||void 0;e.tokens=window.Demandbase.Config.tokens||{};e.useTestDomain=window.Demandbase.Config.useTestDomain||!1;e.useTestIp=window.Demandbase.Config.useTestIp||!1;e.Advertising=window.Demandbase.Config.Advertising||{};e.AssetReporter=window.Demandbase.Config.AssetReporter||{};e.Content=window.Demandbase.Config.Content||{};e.ErrorReporter=window.Demandbase.Config.ErrorReporter||{};e.Forms=window.Demandbase.Config.Forms||{};e.Google_Analytics=window.Demandbase.Config.Google_Analytics||{};e.Google_TagManager=window.Demandbase.Config.Google_TagManager||{};e.IpApiModule=t.Config.IpApiModule||{};e.EmailDomainReporter=window.Demandbase.Config.EmailDomainReporter||{};e.isVoltronEnabled=window.Demandbase.Config.isVoltronEnabled||!0;e.SiteCustomization=window.Demandbase.Config.SiteCustomization||{experiences:{}}}(t.Config||(t.Config={}));t.Connectors||(t.Connectors={})}(t||(t={}));var t;!function(t){t.version="10.1.2"}(t||(t={}));var t;!function(t){!function(e){!function(e){function i(t){return void 0!==t.stacktrace||void 0!==t["opera#sourceloc"]?this.parseOpera(t):t.stack&&t.stack.match(g)?this.parseV8OrIE(t):t.stack?this.parseFFOrSafari(t):void 0}function n(e){if(-1===t.Shims.indexOf(e,":"))return[e];var i=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,n=i.exec(e.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]}function o(t,e){void 0===e&&(e=10);if(t)return parseInt(t,e)}function r(e){return e.stack.split("\n").filter(function(t){return!!t.match(g)},this).map(function(e){t.Shims.indexOf(e,"(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var i=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(i.pop());return{function:i.join(" ")||void 0,file:t.Shims.indexOf(["eval","<anonymous>"],n[0])>-1?void 0:n[0],line:this._parseInt(n[1]),column:this._parseInt(n[2])}},this)}function a(e){return e.stack.split("\n").filter(function(t){return!t.match(f)},this).map(function(e){t.Shims.indexOf(e," > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1"));if(-1===t.Shims.indexOf(e,"@")&&-1===t.Shims.indexOf(e,":"))return{function:e};var i=e.split("@"),n=this.extractLocation(i.pop());return{function:i.join("@")||void 0,file:n[0],line:this._parseInt(n[1]),column:this._parseInt(n[2])}},this)}function s(e){return!e.stacktrace||t.Shims.indexOf(e.message,"\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)}function l(t){for(var e=/Line (\d+).*script (?:in )?(\S+)/i,i=t.message.split("\n"),n=[],o=2,r=i.length;o<r;o+=2){var a=e.exec(i[o]);a&&n.push({file:a[2],line:this._parseInt(a[1])})}return n}function c(t){for(var e=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=t.stacktrace.split("\n"),n=[],o=0,r=i.length;o<r;o+=2){var a=e.exec(i[o]);a&&n.push({function:a[3]||void 0,file:a[2],line:this._parseInt(a[1])})}return n}function u(t){return t.stack.split("\n").filter(function(t){return!!t.match(d)&&!t.match(/^Error created at/)},this).map(function(t){var e,i=t.split("@"),n=this.extractLocation(i.pop()),o=i.shift()||"",r=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(e=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));void 0===e||"[arguments not available]"===e||e.split(",");return{function:r,file:n[0],line:this._parseInt(n[1]),column:this._parseInt(n[2])}},this)}var d=/(^|@)\S+\:\d+/,g=/^\s*at .*(\S+\:\d+|\(native\))/m,f=/^(eval@)?(\[native code\])?$/;e.parse=i;e.extractLocation=n;e._parseInt=o;e.parseV8OrIE=r;e.parseFFOrSafari=a;e.parseOpera=s;e.parseOpera9=l;e.parseOpera10=c;e.parseOpera11=u}(e.ErrorStackParser||(e.ErrorStackParser={}))}(t.Utilities||(t.Utilities={}))}(t||(t={}));var t;!function(t){!function(t){function e(t,e,i){if(null===t||void 0===t)throw new TypeError("Array.indexOf called on null or undefined");return t.indexOf?t.indexOf(e,i):r(t,e,i)}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(Object.assign&&"function"==typeof Object.assign)return Object.assign.apply(null,t);if(null===t[0]||void 0===t[0])throw new TypeError("Cannot convert undefined or null to object");return a(t)}function n(t,e){if(t instanceof RegExp)throw new TypeError("First argument must not be a RegExp");void 0===e&&(e=0);return-1!==this.indexOf(t,e)}function o(t){if(Object.keys)return Object.keys(t);if("function"!=typeof t&&("object"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");return s(t)}function r(t,e,i){var n=t.length>>>0,o=Math.min(0|i,n);if(o<0)o=Math.max(0,n+o);else if(o>=n)return-1;if(void 0===e){for(;o!==n;++o)if(void 0===t[o]&&o in t)return o}else if(e!==e){for(;o!==n;++o)if(t[o]!==t[o])return o}else for(;o!==n;++o)if(t[o]===e)return o;return-1}function a(t){for(var e=Object(t[0]),i=1;i<t.length;i++){var n=t[i];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}function s(t){var e,i,n=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=r.length,s=[];for(e in t)n.call(t,e)&&s.push(e);if(o)for(i=0;i<a;i++)n.call(t,r[i])&&s.push(r[i]);return s}t.console=window.console||{log:function(){},debug:function(){}};t.JSON=window.JSON||{stringify:function(){},parse:function(){}};t.indexOf=e;t.assign=i;t.includes=n;t.keys=o;t._indexOfPolyfill=r;t._assignPolyfill=a;t._keysPolyfill=s}(t.Shims||(t.Shims={}))}(t||(t={}));var t;!function(t){!function(e){!function(i){function n(e){var i={referrer:document.referrer,page:document.URL,page_title:document.title};if(t.Config.isInIFrame)try{i.page=window.top.document.URL;i.referrer=window.top.document.referrer;i.page_title=window.top.document.title}catch(t){i.page=document.referrer;i.referrer=null;i.page_title="3rd Party iFrame"}i=t.Shims.assign(i,e);return r(i)}function o(t,i){var o=t||e.Constants.URL_IP_API;o+=n(i);return o}function r(t){var e="?";for(var i in t)t.hasOwnProperty(i)&&void 0!==t[i]&&(e+="".concat(i,"=").concat(encodeURIComponent(t[i]),"&"));e=e.substring(0,e.length-1);return e}i.buildApiParamString=n;i.buildApiUrl=o;i.buildQueryString=r}(e.Api||(e.Api={}))}(t.Utilities||(t.Utilities={}))}(t||(t={}));!function(e){e.Demandbase.utils=e.Demandbase.utils||{};t.Shims.assign(e.Demandbase.utils,e.Demandbase.utils,{buildApiParamString:t.Utilities.Api.buildApiParamString,buildApiUrl:t.Utilities.Api.buildApiUrl,buildQueryString:t.Utilities.Api.buildQueryString})}(window);var t;!function(t){!function(e){!function(e){function i(i){for(var n=0;n<e.callbackStack.length;n++)!function(n){var o=e.callbackStack[n];t.ErrorReporter.wrap(function(){o.call(t,i)})()}(n)}function n(e){t.IpApi.CompanyProfile=t.Utilities.flatten(e);this.callback(e)}function o(i){if(-1===t.Shims.indexOf(e.callbackStack,i)){e.callbackStack.push(i);t.IpApi&&t.IpApi.CompanyProfile&&t.ErrorReporter.wrap(function(){i.call(t,t.IpApi.CompanyProfile)})()}}e.callbackStack=[];e.callback=i;e.domScriptCallback=n;e.registerCallback=o}(e.Callbacks||(e.Callbacks={}))}(t.Utilities||(t.Utilities={}))}(t||(t={}));!function(e){e.Demandbase.utils=e.Demandbase.utils||{};t.Shims.assign(e.Demandbase.utils,e.Demandbase.utils,{callback:t.Utilities.Callbacks.callback.bind(t.Utilities.Callbacks),registerCallback:t.Utilities.Callbacks.registerCallback.bind(t.Utilities.Callbacks)})}(window);var t;!function(t){!function(e){!function(e){e.QS_USE_TEST_DOMAIN="db_useTestDomain";e.QS_QUERY_DOMAIN="db_domain";e.QS_ENABLE_LOG="db_logging";e.QS_PREVIEW_TOKEN="db_preview_token";e.DFLT_NON_COMPANY="(Non-Company Visitor)";e.DFLT_AW_EMPTY="(AccountWatch Empty)";e.DFLT_NON_AW="(Non-AccountWatch Visitor)";e.DFLT_EVENT_TYPE="click";e.URL_IP_API="api.company-target.com/api/v2/ip.json";e.URL_DOMAIN_API="api.demandbase.com/api/v1/domain.json";e.URL_BW_AD_PIXEL=t.Config.tokens.URL_BW_AD_PIXEL||"match.prod.bidr.io/cookie-sync/demandbase";e.URL_LR_AD_PIXEL=t.Config.tokens.URL_LR_AD_PIXEL||"id.rlcdn.com/464526.gif";e.MODIFICATION_ERROR="SCModificationError";e.PARDOT_VISITOR_COOKIE_REGEX=/^visitor_id[\d]+$/;e.NON_HUMAN_DEVICES=[/adsbot-google/i,/googlebot/i];e.URL_CURRENT=function(){var e=document.URL;t.Config.isInIFrame&&(e=document.referrer);e=encodeURIComponent(e);return e}();e.PROTOCOL="https://"}(e.Constants||(e.Constants={}))}(t.Utilities||(t.Utilities={}))}(t||(t={}));!function(e){e.Demandbase.utils=e.Demandbase.utils||{};t.Shims.assign(e.Demandbase.utils,e.Demandbase.utils,{tokens:t.Utilities.Constants})}(window);var t;!function(t){var e=function(){function e(e){void 0===e&&(e={});this.name=e.name||"";this.modify=e.modify||null;this.segments=e.segments||[];this.url=e.url||[];this.modify||(this.modify=function(){t.Utilities.Logging.log("DBContent: modify function not defined")});"string"==typeof this.segments&&(this.segments=[this.segments]);"string"==typeof this.url&&(this.url=[this.url])}e.prototype.run=function(){var e=!1;for(var i in this.url)if(this.url.hasOwnProperty(i)){var n=this.url[i];t.Utilities.isCurrentPage(n)&&(e=!0)}if(e){var o=!1;for(var i in this.segments)if(this.segments.hasOwnProperty(i)){var r=this.segments[i],a=window.Demandbase.Segments[r];void 0!==a&&a&&(o=!0)}if(!o){t.Utilities.Logging.log("DBContent modify ".concat(this.name," not fired.  Segment ").concat(r));return!1}try{t.Utilities.Logging.log("DBContent: running modify function for: ".concat(this.name));this.modify.call(document)}catch(e){e.name=t.Utilities.Constants.MODIFICATION_ERROR;throw e}return!0}t.Utilities.Logging.log("DBContent modify ".concat(this.name," not fired. no URL match with: ").concat(this.url));return!1};return e}();t.DBContent=e}(t||(t={}));var t;!function(t){!function(e){function i(e){if(!e)return!1;var i=["name","segments","pages","modify"];if("function"!=typeof e.modify){t.Utilities.Logging.log("DBContentBuilder: invalid type in config.");return!1}for(var n=0;n<i.length;n++)if(void 0===e[i[n]]){t.Utilities.Logging.log("DBContentBuilder: invalid config missing: ".concat(i[n]));return!1}return!0}function n(e){if(i(e)){"string"==typeof e.pages?e.url=[e.pages]:e.url=e.pages;"string"==typeof e.segments&&(e.segments=[e.segments]);return new t.DBContent(e)}return null}e.isValid=i;e.build=n}(t.DBContentBuilder||(t.DBContentBuilder={}))}(t||(t={}));var t;!function(t){!function(e){!function(e){function i(e){var i=!0;if(!o(e)){t.Utilities.Logging.log("Event not added.");return!1}var r=e.type||t.Utilities.Constants.DFLT_EVENT_TYPE,a=e.elements,s=a.constructor;if(s!==HTMLCollection&&s!==NodeList)return n(e.elements,r,e.listener);for(var l in a){var c=!1;if(a.hasOwnProperty(l)){c=n(a[l],r,e.listener);if(!c){i=!1;t.Utilities.Logging.log("Event not added to".concat(a[l]))}}}return i}function n(e,i,n){if(!e){t.Utilities.Logging.log("Event not registered - invalid element/s.");return null}e.jquery&&(e=e[0]);t.Utilities.addEventListener(e,i,n);t.Utilities.Logging.log("Event Listener bind to: ".concat(e," on event ").concat(i));return!0}function o(e){for(var i=!1,n=["elements","listener"],o=e.elements||null,r=e.listener||null,a=0;a<n.length;a++)if(void 0===e[n[a]]||!e[n[a]]){t.Utilities.Logging.log("Invalid Event object. Missing: ".concat(n[a]));return!1}if("function"!=typeof r){t.Utilities.Logging.log('Invalid Event: "listener" must be a function. Got ('.concat(r,")"));return!1}o instanceof Node||o instanceof NodeList||o instanceof HTMLElement||o instanceof HTMLCollection||o instanceof Window||o instanceof Document||"function"==typeof o||void 0!==window.Demandbase.jQuery&&o instanceof window.Demandbase.jQuery?i=!0:t.Utilities.Logging.log("Invalid Event:  element: ".concat(o,' has type: "').concat(o.constructor,'" which is not proper instance type.'));return i}e.add=i;e._attachListener=n;e.isValid=o}(e.Events||(e.Events={}))}(t.Utilities||(t.Utilities={}))}(t||(t={}));!function(e){e.Demandbase.utils=e.Demandbase.utils||{};t.Shims.assign(e.Demandbase.utils,e.Demandbase.utils,{events:t.Utilities.Events})}(window);var t;!function(t){!function(e){!function(e){function i(t){n(t)}function n(e){(t.Config.logging||"true"===t.Utilities.getQueryParam(t.Utilities.Constants.QS_ENABLE_LOG))&&t.Shims.console.log("DB: ".concat(e))}e.logging=!1;e.debug=!1;e.alert=i;e.log=n}(e.Logging||(e.Logging={}))}(t.Utilities||(t.Utilities={}))}(t||(t={}));!function(e){e.Demandbase.utils=e.Demandbase.utils||{};t.Shims.assign(e.Demandbase.utils,e.Demandbase.utils,{logging:t.Utilities.Logging.logging,debug:t.Utilities.Logging.debug,alert:t.Utilities.Logging.alert.bind(t.Utilities.Logging),log:t.Utilities.Logging.log.bind(t.Utilities.Logging)})}(window);var t;!function(t){!function(e){function i(t,e){var i={};e.cookie.split(";").forEach(function(e){var n=e.split("="),o=n[0].trim();t.test(o)&&n.length>1&&(i[o]=n[1].trim())});return i}function n(t){return document.getElementById(t)||document.getElementsByName(t)[0]||null}function o(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent&&t.attachEvent(e,i)}function r(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=t,o=0,r=e;o<r.length;o++){var a=r[o];if(void 0===n)return;n="function"==typeof a?a(n):n[a]}return n}function a(t){for(var e in t){var i=t[e];if("object"==typeof i&&null!==i&&t.hasOwnProperty(e)){for(var n in i)t["".concat(e,"_").concat(n)]=i[n];delete t[e]}}return t}function s(e,i){if(!1===e[i])return"false";for(var n={city:"registry_city",state:"registry_state",zip:"registry_zip_code",country:"registry_country_code",country_name:"registry_country",latitude:"registry_latitude",longitude:"registry_longitude"},o=t.Config.nonCompanyDefault||t.Utilities.Constants.DFLT_NON_COMPANY,r=t.Config.emptyWatchDefault||t.Utilities.Constants.DFLT_AW_EMPTY,a=n[i]||"",s=e[i]||e[a]||o,l=(e.company_name||o)!==o,c=t.Shims.keys(e),u=!1,d=0;d<c.length;d++)if(0===t.Shims.indexOf(c[d],"watch_list_")){u=!0;break}if(-1!==t.Shims.indexOf(i,"watch_list_")&&l){u||(r=t.Config.nonWatchDefault||t.Utilities.Constants.DFLT_NON_AW);s=e[i]||r}return s}function l(t,e){var e=e||window||{location:{search:"",hash:""}},i={},n=e.location.search.substring(1)||e.location.hash&&e.location.hash.split("?")[1];if(!n)return"";for(var o=n.split("&"),r=0;r<o.length;r++){var a=o[r].split("="),s=a[0],l=a[1];i[s]=l}return i[t]||""}function c(e,i,n){void 0===n&&(n="https://");if(e){t._loadedScripts=t._loadedScripts||{};if(!t._loadedScripts[e]){t._loadedScripts[e]=!0;var o=document.createElement("script"),r=document.getElementsByTagName("script")[0];o.async=!0;o.id=i||"";o.src="".concat(n).concat(e.replace(/(^\/\/)|(^http:\/\/)|(^https:\/\/)/,""));r.parentNode.insertBefore(o,r)}}}function u(){try{return t.Shims.indexOf(window.navigator.userAgent,"MSIE ")>0}catch(t){return!0}}function d(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt("0x".concat(e),16))}))}function g(t,e){return"".concat(t," has been deprecated since version ").concat(e)}e.getCookiesByRegex=i;e.getElementByIdOrName=n;e.addEventListener=o;e.dig=r;e.flatten=a;e.getAttributeValue=s;e.getQueryParam=l;e.insertScript=c;e.isOldBrowserOrUserAgentUnavailable=u;e.b64EncodeUnicode=d;e.generateDeprecationMessage=g}(t.Utilities||(t.Utilities={}))}(t||(t={}));!function(e){e.Demandbase.utils=e.Demandbase.utils||{};t.Shims.assign(e.Demandbase.utils,e.Demandbase.utils,t.Utilities);t.Shims.assign(e.Demandbase.utils,t.utils,{loadScript:t.Utilities.insertScript,flattenData:t.Utilities.flatten,getAttrValue:t.Utilities.getAttributeValue})}(window);var t;!function(t){!function(e){function i(){return window.top!==window.self}function n(){return document.readyState}function o(){try{if(window.navigator.cookieEnabled){document.cookie="COOKIE_TEST=TEST";if(-1!==t.Shims.indexOf(document.cookie,"COOKIE_TEST=TEST")){document.cookie="COOKIE_TEST=PASSED_TEST";return!0}}return!1}catch(t){return!1}}function r(e){var i=document.location.href;t.Config.isInIFrame&&(i=document.referrer);e&&(i=e);return i}function a(e,i){function n(e){return 0===t.Shims.indexOf(e,"//")?e.substring("//".length,e.length):e.replace(/^.*?:\/\//g,"")}function o(t){return t.replace(/^(www\.)/g,"")}function a(e){-1!==t.Shims.indexOf(e,s,e.length-s.length)&&(e=e.substring(0,e.length-1));-1!==t.Shims.indexOf(e,"/",e.length-"/".length)&&(e=e.substring(0,e.length-1));return e}var s="#",l=document.location.hash,c=document.location.search,u=r(i);if(i){var d=t.Shims.indexOf(i,s);-1===d&&(d=i.length);l=i.substring(t.Shims.indexOf(i,s),i.length);c=i.substring(t.Shims.indexOf(i,"?"),d);u=i}e=n(e);e=o(e);e=a(e);u=n(u);u=o(u);u=a(u);-1===t.Shims.indexOf(e,s)&&-1!==t.Shims.indexOf(u,s)&&(u=u.substring(0,u.length-l.length));-1===t.Shims.indexOf(e,"?")&&-1!==t.Shims.indexOf(u,"?")&&(u=u.substring(0,u.length-c.length));u=a(u);var g=u===e;t.Utilities.Logging.log("utilities.isCurrentPage(): Page check resulted in: "+g);return g}function s(t,e){if(!t)return!1;if(t.length<=0)return!1;"^"!==t[0]&&(t="^".concat(t));"$"!==t[t.length-1]&&(t+="$");var i=r(e);return new RegExp(t).test(i)}function l(t){try{var e=window[t.toString()];e.setItem("STORAGE_CHECK","STORAGE_CHECK");e.getItem("STORAGE_CHECK");e.removeItem("STORAGE_CHECK");return!0}catch(t){return!1}}function c(t){return t?"#".concat(t.replace(/(:|\.|\[|\]|,)/g,"\\$1")):null}function u(t,e){for(var i=0;i<e.length;i++)if(p(t,e[i]))return!0;return!1}function d(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}function g(t){return t.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&")}function f(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}function p(e,i){return!!i&&(!(i.length>e.length)&&-1!==t.Shims.indexOf(e,i))}e.detectIFrame=i;e.getDocumentReadyState=n;e.isCookieEnabled=o;e.isCurrentPage=a;e.isCurrentPageRegex=s;e.isStorageEnabled=l;e.jqid=c;e.includesAny=u;e.isValidEmail=d;e.escapeRegExp=g;e.nodeListToArray=f}(t.Utilities||(t.Utilities={}))}(t||(t={}));var t;!function(t){var e=function(){function e(t,e,i){this.config=t;this.moduleNameToConstructorMap=e;this.nameSpace=i}e.prototype.build=function(){this._parseConfig()};e.prototype._parseConfig=function(){var e=this;t.Shims.keys(this.config).forEach(function(i){var n=e._testConfigForKey(i);if(n&&3===n.length){var o=n[1],r=e.moduleNameToConstructorMap[o];if(e.nameSpace[i]){t.ErrorReporter.send(new Error("Failed to dynamically create configuration for ".concat(i," due to previously existing configuration with the same name.")));return}if(!r){t.ErrorReporter.send(new Error("No constructor available in moduleNameToConstructor map for module: ".concat(o)));return}e.nameSpace[i]=new r(e.config[i]);e.nameSpace[i].isEnabled()&&e.nameSpace[i].initialize()}})};e.prototype._testConfigForKey=function(t){return e.REGEX_CUSTOM_MODULE_NAME.exec(t)};e.REGEX_CUSTOM_MODULE_NAME=/(.*)__(.*)/;return e}();t.ModuleFactory=e}(t||(t={}));var t;!function(t){var e=function(){function e(){}e.prototype.isEnabled=function(){return this.configuration.enabled};e.prototype.mergeConfigs=function(){for(var e,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];(e=t.Shims).assign.apply(e,f([this.configuration],i,!1))};return e}();t.BaseModule=e}(t||(t={}));var t;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;n.ADVERTISING_PIXEL_ID="ad";n.CONVERSION_PIXEL_ID="cn";n.RETARGETING_PIXEL_ID="rt";n.DEFAULT_CONFIGURATION={enabled:!0,key:null,reportingOnly:!1,enableBW:!0,enableLR:!0};n.configuration={};n.trackConversion=n.trackConversionListener;n.load=n.initialize;n.loadPixels=n.insertPixels;n._loadPixel=n.insertPixel;n._setCampaign=n.loadCampaign;n._setEvents=n.registerEvents;e.prototype.mergeConfigs.call(n,n.DEFAULT_CONFIGURATION,i||t.Config.Advertising);e.prototype.mergeConfigs.call(n,i||t.Config.ads);return n}p(i,e);i.prototype.initialize=function(){this.insertPixels();!0===this.configuration.reportingOnly&&this.configuration.key&&this.configuration.key!==t.Config.key&&t.IpApiReportingOnly.get(this.configuration.key,!1)};i.prototype.isConversionPage=function(){throw new Error(t.Utilities.generateDeprecationMessage("AdvertisingModule.isConversionPage","8.0.0"))};i.prototype.insertPixels=function(){if(this.configuration.enableBW){t.Utilities.Logging.log("BW pixel enabled");this.insertBWPixel(this.ADVERTISING_PIXEL_ID)}if(this.configuration.enableLR){t.Utilities.Logging.log("LR pixel enabled");this.insertLRPixel(this.ADVERTISING_PIXEL_ID)}};i.prototype.createAndAppendPixel=function(t,e){var i=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0],n=document.createElement("img");n.setAttribute("style","display:none");n.setAttribute("alt","");n.setAttribute("aria-hidden","true");n.setAttribute("width","0");n.setAttribute("height","0");n.id=t;n.src=e;i.appendChild(n)};i.prototype.insertBWPixel=function(e){var i="db_bw_pixel_".concat(e),n=t.Utilities.Constants.PROTOCOL+t.Utilities.Constants.URL_BW_AD_PIXEL;this.createAndAppendPixel(i,n)};i.prototype.insertLRPixel=function(e){var i="db_lr_pixel_".concat(e),n=t.Utilities.Constants.PROTOCOL+t.Utilities.Constants.URL_LR_AD_PIXEL;this.createAndAppendPixel(i,n)};i.prototype.insertPixel=function(e){throw new Error(t.Utilities.generateDeprecationMessage("AdvertisingModule.insertPixel","8.0.0"))};i.prototype.loadCampaign=function(){throw new Error(t.Utilities.generateDeprecationMessage("AdvertisingModule.loadCampaign","8.0.0"))};i.prototype.registerEvents=function(){throw new Error(t.Utilities.generateDeprecationMessage("AdvertisingModule.registerEvents","8.0.0"))};i.prototype.trackConversionListener=function(){throw new Error(t.Utilities.generateDeprecationMessage("AdvertisingModule.trackConversionListener","8.0.0"))};i.prototype.virtualPageViewListener=function(){throw new Error(t.Utilities.generateDeprecationMessage("AdvertisingModule.virtualPageViewListener","8.0.0"))};return i}(t.BaseModule);t.AdvertisingModule=e}(t||(t={}));var t;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;n.DEFAULT_CONFIGURATION={enabled:!0,assetList:["api.demandbase.com/autocomplete/widget.js","api.demandbase.com/autocomplete/widget.min.js","autocomplete.demandbase.com/autocomplete/widget.js","autocomplete.demandbase.com/autocomplete/widget.min.js","scripts.demandbase.com/formWidget.js","scripts.demandbase.com/formWidgetDebug.js","scripts.demandbase.com/demandbase-sdk.js","scripts.demandbase.com/demandbase-sdk-debug.js","scripts.demandbase.com/forms.js","scripts.demandbase.com/forms.min.js"]};n.ERROR_MESSAGE_PREFIX="Legacy Asset Detected: ";n.configuration={};n.values={};e.prototype.mergeConfigs.call(n,n.DEFAULT_CONFIGURATION,i||t.Config.AssetReporter);return n}p(i,e);i.prototype.initialize=function(){"complete"===t.Utilities.getDocumentReadyState()?this.read():t.Utilities.addEventListener(window,"load",t.ErrorReporter.wrap(this.read.bind(this)))};i.prototype.read=function(){for(var e=this.configuration.assetList.length,i=0;i<e;i++){var n=this.configuration.assetList[i];if(document.querySelector("script[src='".concat(t.Utilities.Constants.PROTOCOL).concat(n,"']"))){this.values[n]=!0;this.send(n)}else this.values[n]=!1}};i.prototype.send=function(e){var i=new Error(this.ERROR_MESSAGE_PREFIX+e);t.ErrorReporter.send(i)};return i}(t.BaseModule);t.AssetReporterModule=e}(t||(t={}));var t;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;n.DEFAULT_CONFIGURATION={enabled:!0};n.configuration={};n.mods={};e.prototype.mergeConfigs.call(n,n.DEFAULT_CONFIGURATION,i||t.Config.Content);t.Shims.assign(n.configuration,i||t.Config.content);return n}p(i,e);i.prototype.initialize=function(){t.Utilities.Callbacks.registerCallback(this.callback.bind(this));this.setup()};i.prototype.callback=function(){this.setup();this.modify()};i.prototype.setup=function(){if(void 0!==t.Config.content)for(var e in t.Config.content){var i=t.Config.content[e],n=window.Demandbase.DBContentBuilder.build(i);n&&(this.mods[n.name]=n)}};i.prototype.modify=function(){var e=this;return t.ErrorReporter.wrap(function(){for(var t in e.mods)if(e.mods.hasOwnProperty(t)){var i=e.mods[t],n=i.run();n&&!0}})()};return i}(t.BaseModule);t.ContentModule=e}(t||(t={}));var t;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;n.DEFAULT_CONFIGURATION={enabled:!0,fireOnLoad:!1,formInputSelectors:['input[type="text"]','input[type="email"]'],inputSearchTerms:["email","user","login"]};n.configuration={};n.baseUrl="https://segments.company-target.com";n.activeSetTimeout=0;e.prototype.mergeConfigs.call(n,n.DEFAULT_CONFIGURATION,i||t.Config.EmailDomainReporter);return n}p(i,e);i.prototype.initialize=function(){this.configuration.fireOnLoad&&this.sendDataIfAlreadyPresent();this.attachListenersIfDocumentReady()};i.prototype.sendDataIfAlreadyPresent=function(){var e=this,i=this.suspectedEmailInputs();i.length<1||i.forEach(function(i){var n=i.value;if(t.Utilities.isValidEmail(n)){var o=n.split("@")[1].toLowerCase();e.send(o)}})};i.prototype.attachListenersIfDocumentReady=function(){var e=this;"loading"!==t.Utilities.getDocumentReadyState()?this.suspectedEmailInputs().forEach(function(i){i.addEventListener("input",function(){var n=i.value;if(t.Utilities.isValidEmail(n)){var o=n.split("@")[1].toLowerCase();window.clearTimeout(e.activeSetTimeout);e.activeSetTimeout=window.setTimeout(function(){e.send(o)},400)}})}):document.addEventListener("DOMContentLoaded",this.attachListenersIfDocumentReady.bind(this))};i.prototype.suspectedEmailInputs=function(){var e=this;return t.Utilities.nodeListToArray(document.querySelectorAll(this.configuration.formInputSelectors.join(","))).map(function(t){return t}).filter(function(i){
var n=i.name.toLowerCase(),o=i.id.toLowerCase(),r=e.configuration.inputSearchTerms;return!!t.Utilities.includesAny(n,r)||!!t.Utilities.includesAny(o,r)})};i.prototype.send=function(e){var i;window.XMLHttpRequest?i=new XMLHttpRequest:window.ActiveXObject&&(i=new ActiveXObject("Microsoft.XMLHTTP"));var n=t.Config.key||t.Utilities.dig(t.Config,"analytics","key")||t.Utilities.dig(t.Config,"ads","key")||t.Utilities.dig(t.Config,"forms","key")||"",o=t.Utilities.b64EncodeUnicode("vendor=mariposa&p1=".concat(e,"&token=").concat(n)),r="".concat(this.baseUrl,"/l/").concat(o);try{i.open("GET",r);i.withCredentials=!0;i.setRequestHeader("Content-type","application/json");i.send()}catch(t){throw t}};i.prototype.responseHandler=function(t){};return i}(t.BaseModule);t.EmailDomainReporterModule=e}(t||(t={}));var t;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;n.VERSION="0.0.0";n.PROJECT_ID="141580";n.PROJECT_KEY="9a0a3519e930259f5886a7af53b0ccaa";n.SENTRY_PROJECT_ID="1190150";n.SENTRY_PUBLIC_KEY="3c9d467f8a9d4295b0f8320ae852091d";n.DEFAULT_CONFIGURATION={environment:"production",ignorableErrors:[]};n.configuration={};n.additionalErrorDetails={};e.prototype.mergeConfigs.call(n,n.DEFAULT_CONFIGURATION,i||t.Config.ErrorReporter);return n}p(i,e);i.prototype.initialize=function(){};i.prototype.send=function(e){if(!(t.Shims.indexOf(this.configuration.ignorableErrors,e.name)>-1||t.Shims.indexOf(this.configuration.ignorableErrors,e.message)>-1)){var i;window.XMLHttpRequest?i=new XMLHttpRequest:window.ActiveXObject&&(i=new ActiveXObject("Microsoft.XMLHTTP"));var n="https://sentry.io/api/".concat(this.SENTRY_PROJECT_ID,"/store/?sentry_version=7&sentry_key=").concat(this.SENTRY_PUBLIC_KEY);try{i.open("POST",n,!0);i.setRequestHeader("Content-type","text/plain;charset=UTF-8");i.send(this.formatMessage(e,!0))}catch(t){}}};i.prototype.wrap=function(e){var i=this;if("function"!=typeof e)throw new Error("Invalid Function: ".concat(e));return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];try{if(void 0!==e&&"function"==typeof e.apply)return e.apply(i,n)}catch(e){i.send(e);t.Utilities.Logging.alert("Error: ".concat(e,"\n").concat(e.stack))}}};i.prototype.formatMessage=function(e,i){void 0===i&&(i=!1);var n=this.parseError(e),o=this.parseContext(),r=this.parseEnviroment(),a=this.parseSession(),s=this.parseParams(),l=this.additionalErrorDetails;if(i){var c=this.formatErrorForSentry(n);return t.Shims.JSON.stringify({logger:o.notifier.name,platform:"javascript",release:o.version,environment:o.environment,request:{url:o.url},contexts:{browser:{userAgent:o.userAgent}},tags:{clientId:r.config.clientId},extra:{readyState:o.readyState,config:r.config,companyProfile:a,additionalErrorDetails:l},exception:{values:[c]}})}return t.Shims.JSON.stringify({errors:[n],context:o,environment:r,session:a,params:s})};i.prototype.formatErrorForSentry=function(t){for(var e=[],i=0,n=t.backtrace;i<n.length;i++){var o=n[i];e.push({function:o.function,filename:o.file,lineno:o.line,colno:o.column})}return{type:t.type,value:t.message,stacktrace:{frames:e}}};i.prototype.parseError=function(e){return{type:e.name,message:e.message,backtrace:t.Utilities.ErrorStackParser.parse(e)}};i.prototype.parseContext=function(){return{notifier:{name:"ErrorReporterModule",version:this.VERSION},environment:this.configuration.environment,version:t.version,url:window.location.href,userAgent:navigator.userAgent,rootDirectory:window.location.origin,readyState:document.readyState}};i.prototype.parseEnviroment=function(){return{config:t.Utilities.dig(t,"Config")}};i.prototype.parseSession=function(){return{companyProfile:t.Utilities.dig(t,"IP","CompanyProfile")}};i.prototype.parseParams=function(){return{}};return i}(t.BaseModule);t.ErrorReporterModule=e}(t||(t={}));var t;!function(t){var e=function(e){function i(t){var i=e.call(this)||this;i.FORMS_REMOTE_MODULE_URL="tag.demandbase.com/shared/forms_2748a4eef8.min.js";i.DEFAULT_CONFIGURATION={enabled:void 0,emailID:null,emailFields:[]};i.configuration={};i.inserted=!1;i.setConfiguration(t);return i}p(i,e);i.prototype.initialize=function(){t.Utilities.Callbacks.registerCallback(this.whenReady.bind(this))};i.prototype.whenReady=function(){this.isMktoForms2Installed()?window.MktoForms2.whenReady(t.ErrorReporter.wrap(this.load.bind(this))):this.load()};i.prototype.load=function(){var e=!1;if("function"==typeof t.Config.isFormPage){e=t.Config.isFormPage();this.setConfiguration();e=t.Config.isFormPage()}else e=this.isFormPage();e&&!this.inserted&&this.insertForms()};i.prototype.isFormPage=function(){var e=this.configuration.emailFields;this.configuration.emailID&&e.push(this.configuration.emailID);for(var i=0;i<e.length;i++)if(t.Utilities.getElementByIdOrName(e[i]))return!0;return!1};i.prototype.isMktoForms2Installed=function(){return void 0!==window.MktoForms2&&void 0!==window.MktoForms2.whenReady};i.prototype.insertForms=function(){this.inserted=!0;t.Connectors.initWebForm=this.initializeWebForm;t.Utilities.insertScript(t.FormsLoader.FORMS_REMOTE_MODULE_URL,"db_form_module")};i.prototype.initializeWebForm=function(e){e=e||t.Config.forms||t.Config.Forms||{};window.Demandbase.Connectors.WebForm.connect(e)};i.prototype.setConfiguration=function(i){e.prototype.mergeConfigs.call(this,this.DEFAULT_CONFIGURATION,i||t.Config.Forms);void 0===this.configuration.enabled&&void 0!==t.Config.Forms&&(this.configuration.enabled=!0);e.prototype.mergeConfigs.call(this,this.DEFAULT_CONFIGURATION,i||t.Config.forms);void 0===this.configuration.enabled&&void 0!==t.Config.forms&&(this.configuration.enabled=!0)};return i}(t.BaseModule);t.FormsLoaderModule=e}(t||(t={}));var t;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;n.DEFAULT_CONFIGURATION={enabled:!0,events:null,fieldMap:null,googleAnalyticsClassicScope:2,trackerName:null,trackerId:null};n.configuration={};n.gType="";n._cEvent=n.sendEvent;e.prototype.mergeConfigs.call(n,n.DEFAULT_CONFIGURATION,i||t.Config.Google_Analytics);e.prototype.mergeConfigs.call(n,i||t.Config.analytics);return n}p(i,e);i.prototype.initialize=function(){this._detectG();this._setTrackerName();this.configuration.fieldMap&&"{}"!==t.Shims.JSON.stringify(this.configuration.fieldMap)&&t.Utilities.Callbacks.registerCallback(this.callback.bind(this));this._setEvents()};i.prototype.sendEvent=function(e,i,n){"ga"===this.gType?this._trackEvent(e,i,n):window.ga(function(){t.Connectors.Google_Analytics._sendEvent(e,i,n)});t.Utilities.Logging.log("Sent Custom Event:".concat(e,"/").concat(i,"/").concat(n))};i.prototype._setTrackerName=function(){var t=this;if(!this.configuration.trackerName){var e=void 0!==window.ga;if(void 0!==window._gat&&"function"==typeof window._gat._getTrackers){var i=_gat._getTrackers();if(void 0!==i.length&&i.length>0){if(this.configuration.trackerId)for(var n=0;n<i.length;n++)if(i[n]._getName().length>0){var o=i[n]._getName();if(i[n]._getAccount()===this.configuration.trackerId&&!this.configuration.trackerName){this.configuration.trackerName=o;return}}var r=i[0]||null;if(r&&"function"==typeof r._getName){var a=r._getName()||null;this.configuration.trackerName||(this.configuration.trackerName=a)}}}e&&window.ga(function(){var e=window.ga.getAll()||[];if(t.configuration.trackerId)for(var i=0;i<e.length;i++){var n=e[i],o=n.get("name");if(n.get("trackingId")===t.configuration.trackerId){t.configuration.trackerName=o;return}}if(void 0!==e.length&&e.length>0){var n=e[0]||null;if(n&&"function"==typeof n.get){var r=n.get("name")||null;t.configuration.trackerName=r}}})}};i.prototype.callback=function(e){try{if(!e)throw new Error("Error - no data passed to callback");var i=t.Connectors.Google_Analytics;i._detectG();i._setTrackerName();for(var n in i.configuration.fieldMap)if(i.configuration.fieldMap.hasOwnProperty(n)){var o=+n,r=i.configuration.fieldMap[n],a=t.Utilities.getAttributeValue(e,r);i._var(o,r,a.toString())}i.sendEvent("Demandbase","API Resolution","IP API")}catch(e){t.Utilities.Logging.log("GA Error: ".concat(e,"\n").concat(e.stack));t.Connectors.Google_Analytics.sendEvent("Demandbase","API Resolution","Callback Error")}};i.prototype._detectG=function(){if(window._gaq){this.gType="ga";_gaq.push(["_addDevId","NE7T9"])}else this.gType=null;this._setGaObject();try{window.ga(function(){t.Connectors.Google_Analytics.gType="ua"})}catch(e){t.Connectors.Google_Analytics.gType="ua"}t.Utilities.Logging.log("Detected Google version: ".concat(this.gType))};i.prototype._sendEvent=function(t,e,i){var n=this.configuration.trackerName?"".concat(this.configuration.trackerName,".send"):"send";window.ga(n,"event",{eventCategory:t,eventAction:e,eventLabel:i,nonInteraction:!0})};i.prototype._setCustomDimension=function(t,e){var i=this.configuration.trackerName?"".concat(this.configuration.trackerName,".set"):"set";window.ga(i,"dimension".concat(t),e)};i.prototype._setCustomVariable=function(t,e,i){var n=this.configuration.trackerName?"".concat(this.configuration.trackerName,"._setCustomVar"):"_setCustomVar",o=this.configuration.googleAnalyticsClassicScope||2;window._gaq.push([n,t>>0,e,i,o])};i.prototype._setEvents=function(){var e=this.configuration.events||[];if(e)for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];if(n.data){var o=n.data.category||"",r=n.data.action||"",a=n.data.label||"";void 0===n.listener&&o&&r&&a?n.listener=function(){t.Connectors.Google_Analytics.sendEvent(o,r,a);t.Utilities.Logging.log("Event listener ran")}:o&&r&&a||t.Utilities.Logging.log("Need to define a custom listener function or set data with category/action/label")}t.Utilities.Events.add(n)}};i.prototype._setGaObject=function(){if(void 0===window.ga){window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)};window.ga.l=+new Date}};i.prototype._trackEvent=function(t,e,i){var n=this.configuration.trackerName?"".concat(this.configuration.trackerName,"._trackEvent"):"_trackEvent";window._gaq.push([n,t,e,i,0,1])};i.prototype._var=function(e,i,n){"ga"===this.gType?this._setCustomVariable(e,i,n):window.ga(function(){t.Connectors.Google_Analytics._setCustomDimension(e,n)});t.Utilities.Logging.log("".concat(e," ").concat(i," : ").concat(n))};return i}(t.BaseModule);t.BaseGoogle_AnalyticsModule=e}(t||(t={}));var t;!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}p(e,t);e.prototype.getTrackerInfo=function(){var t=[],e=[];if(void 0!==window._gaq&&void 0!==window._gat&&"function"==typeof window._gat._getTrackers){window._gat._getTrackers().forEach(function(e){e._getName().length>0&&t.push({type:"classic",trackerId:e._getAccount(),name:e._getName()})})}if(void 0!==window.ga&&void 0!==window.ga.getAll){window.ga.getAll().forEach(function(t){e.push({type:"universal",trackerId:t.get("trackingId"),name:t.get("name")})})}return e.concat(t)};return e}(t.BaseGoogle_AnalyticsModule);t.Google_AnalyticsModule=e}(t||(t={}));var t;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;n.DEFAULT_CONFIGURATION={enabled:!0};n.configuration={};e.prototype.mergeConfigs.call(n,n.DEFAULT_CONFIGURATION,i||t.Config.Google_TagManager);return n}p(i,e);i.prototype.initialize=function(){t.Utilities.Callbacks.registerCallback(this.callback.bind(this))};i.prototype.callback=function(e){t.Connectors.Google_TagManager.pushToDataLayer(e)};i.prototype.pushToDataLayer=function(e,i){if(!window.google_tag_manager||!window.dataLayer||"function"!=typeof dataLayer.push)return!1;var n=i?"_".concat(i):"";dataLayer.push(e);dataLayer.push({event:"Demandbase_Loaded".concat(n)});t.Utilities.Logging.log("Pushed to GTM dataLayer");return!0};return i}(t.BaseModule);t.Google_TagManagerModule=e}(t||(t={}));var t;!function(t){var e=function(e){function i(i){var n=e.call(this)||this;n.TEST_MODE_ENABLED="db_useTestIp";n.TEST_MODE_VALUE="db_ip";n.API_ENDPOINT="api.company-target.com/api/v2/ip.json";n.DEFAULT_CONFIGURATION={apiKey:null,baseUrl:n.API_ENDPOINT,testModeEnabled:!1,testModeValue:null,masIntegrations:{pardot:!1},enablePardotPolling:!0};n.configuration={};n.initialized=!1;n.pollForPardotStart=0;n.pardotMaxPollWindow=5e3;n.key=n.configuration.apiKey;n.useTestValue=n.configuration.testModeEnabled;n.testValue=n.configuration.testModeValue;n.load=n.get;n._loadOnce=n.getOnce;n.CompanyProfile=void 0;n.isCalled=!1;n.experiences={};try{e.prototype.mergeConfigs.call(n,n.DEFAULT_CONFIGURATION,{apiKey:t.Config.key||t.Utilities.dig(t.Config,"analytics","key")||t.Utilities.dig(t.Config,"ads","key")||t.Utilities.dig(t.Config,"forms","key"),testModeEnabled:t.Utilities.getQueryParam(n.TEST_MODE_ENABLED)||t.Config.useTestIp,testModeValue:t.Utilities.getQueryParam(n.TEST_MODE_VALUE)||t.Config.testIp},i||t.Config.IpApiModule);n.initialized=!0}catch(t){n.initialized=!1}return n}p(i,e);i.prototype.initialize=function(){try{t.Shims.assign(this.configuration,this.configuration,{apiKey:t.Config.key||t.Utilities.dig(t.Config,"analytics","key")||t.Utilities.dig(t.Config,"ads","key")||t.Utilities.dig(t.Config,"forms","key"),testModeEnabled:t.Utilities.getQueryParam(this.TEST_MODE_ENABLED)||t.Config.useTestIp,testModeValue:t.Utilities.getQueryParam(this.TEST_MODE_VALUE)||t.Config.testIp});this.initialized=!0}catch(e){this.initialized=!1;t.ErrorReporter.send(e)}};i.prototype.buildIPAPIParameters=function(e){return m(this,void 0,void 0,function(){var i,n;return h(this,function(o){switch(o.label){case 0:i={query:this.fetchIpAddress(),mas_integrations:void 0,src:"tag"};return document.interestCohort?[4,document.interestCohort()]:[3,2];case 1:n=o.sent();i.cohort_id=n.id;i.cohort_version=n.version;o.label=2;case 2:return t.Config.isVoltronEnabled?[2,t.Shims.assign(i,{auth:e||this.configuration.apiKey})]:[2,t.Shims.assign(i,{key:e||this.configuration.apiKey})]}})})};i.prototype.get=function(e,i){void 0===e&&(e=void 0);void 0===i&&(i=!0);return m(this,void 0,void 0,function(){var n,o,r,a,s=this;return h(this,function(l){switch(l.label){case 0:this.initialized||this.initialize();window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP"));return n&&!t.Utilities.isOldBrowserOrUserAgentUnavailable()?[3,2]:[4,this.getByDomScript(e,i)];case 1:l.sent();return[2,t.Utilities.Logging.log("IP API query via DOM tag")];case 2:return[4,this.buildIPAPIParameters(e)];case 3:o=l.sent();r=t.Utilities.getQueryParam(t.Utilities.Constants.QS_PREVIEW_TOKEN);r&&(o.preview_token=r);if(!o.key&&!o.auth)return[2,t.Utilities.Logging.log("IP API query cancelled - check auth key.")];a=this.configuration.masIntegrations&&this.configuration.masIntegrations.pardot;a?o.mas_integrations=t.Utilities.b64EncodeUnicode(t.Shims.JSON.stringify({pardot:this.fetchOrPollForPardotCookie()||{}})):t.Utilities.Logging.log("No Pardot integration in config, skipping cookie sync");i&&(n.onreadystatechange=t.ErrorReporter.wrap(function(){s.responseHandler(n)}));try{n.open("GET","https://".concat(t.Utilities.Api.buildApiUrl(this.configuration.baseUrl,o)));void 0!==n.withCredentials&&(n.withCredentials=!0);n.send()}catch(t){if(0!==n.status)throw t;if(!this.isIgnorableDevice())throw new Error("IP API Request Blocked")}return[2]}})})};i.prototype.isIgnorableDevice=function(){for(var e=0;e<t.Utilities.Constants.NON_HUMAN_DEVICES.length;e++)if(t.Utilities.Constants.NON_HUMAN_DEVICES[e].test(window.navigator.userAgent))return!0;return!1};i.prototype.getByDomScript=function(e,i){void 0===e&&(e=void 0);void 0===i&&(i=!0);return m(this,void 0,void 0,function(){var n,o,r,a;return h(this,function(s){switch(s.label){case 0:r=(o=t.Shims).assign;a=[{}];return[4,this.buildIPAPIParameters(e)];case 1:n=r.apply(o,a.concat([s.sent(),{callback:i?"Demandbase.Utilities.Callbacks.domScriptCallback":""}]));if(!n&&!n.auth)return[2,t.Utilities.Logging.log("IP API query cancelled - check auth key.")];t.Utilities.insertScript(t.Utilities.Api.buildApiUrl(this.configuration.baseUrl,n),"db_ip_api");return[2]}})})};i.prototype.getOnce=function(){if(this.isCalled)t.Utilities.Logging.log("IP API call halted. Already called.");else{this.isCalled=!0;this.get()}};i.prototype.fetchIpAddress=function(){if(this.configuration.testModeEnabled)return this.configuration.testModeValue};i.prototype.responseHandler=function(e){if(4===e.readyState&&200===e.status){var i=e.responseText;try{var n=t.Shims.JSON.parse(i);this.parseResponseForExperiences(n);this.CompanyProfile=t.Utilities.flatten(n);t.Utilities.Callbacks.callback(this.CompanyProfile)}catch(n){t.ErrorReporter.additionalErrorDetails={status:e.status,readyState:e.readyState,url:e.responseURL,body:i};throw"string"==typeof i&&i?n:new Error("responseText should be text and not empty")}}};i.prototype.parseResponseForExperiences=function(e){if(e&&e.hasOwnProperty("experiences")){t.Utilities.Logging.log("IpAPI.parseResponseForExperiences(): Experiences present in IP API response.");this.experiences=e.experiences}return this.experiences};i.prototype.fetchOrPollForPardotCookie=function(){if(this.configuration.masIntegrations&&this.configuration.masIntegrations.pardot){var e=t.Utilities.getCookiesByRegex(t.Utilities.Constants.PARDOT_VISITOR_COOKIE_REGEX,document);if("object"==typeof e&&t.Shims.keys(e).length>0){t.Utilities.Logging.log("Found Pardot cookie, including in API request");return e}if(!1!==(this.configuration.enablePardotPolling&&0===this.pollForPardotStart)){t.Utilities.Logging.log("Pardot cookie not found, initiating polling");this.pollForPardotCookie()}}else t.Utilities.Logging.log("No Pardot integration in config, skipping cookie sync")};i.prototype.pollForPardotCookie=function(){var e=this;if(0===this.pollForPardotStart){this.pollForPardotStart=Date.now();t.Utilities.Logging.log("Pardot cookie polling started at ".concat(this.pollForPardotStart))}if(Date.now()-this.pollForPardotStart>this.pardotMaxPollWindow)t.Utilities.Logging.log("Pardot cookie not found within ".concat(this.pardotMaxPollWindow," ms"));else if(this.fetchOrPollForPardotCookie()){t.Utilities.Logging.log("Pardot cookie found, making second API call");this.get(void 0,!1)}else window.setTimeout(function(){e.pollForPardotCookie()},100)};return i}(t.BaseModule);t.IpApiModule=e}(t||(t={}));var t;!function(t){var e=function(e){function n(i){var n=e.call(this)||this;n.DEFAULT_CONFIGURATION={isEnabled:!1,experiences:{}};n.SC_QUERY_PARAMETER_FORCE_FIRE="db_sc_experience_by_id";n.configuration=t.Shims.assign({},n.DEFAULT_CONFIGURATION);n.wrappedExperiences={};n.initialized=!1;e.prototype.mergeConfigs.call(n,n.configuration,n.DEFAULT_CONFIGURATION,t.Config.SiteCustomization,i);return n}p(n,e);n.prototype.isEnabled=function(){return!0===this.configuration.isEnabled||!0===this.configuration.enabled};n.prototype.initialize=function(){if(this.isEnabled()){t.Utilities.Logging.log("SiteCustomization.initialize(): Initializing...");this.setup();t.Utilities.Callbacks.registerCallback(this.callback.bind(this))}else t.Utilities.Logging.log("Site Customization is currently disabled, will not fire.")};n.prototype.callback=function(){if(this.fireExperienceByQueryParameter())t.Utilities.Logging.log("SiteCustomization.callback(): Experience already forced to fire by query parameter!");else{t.Utilities.Logging.log("SiteCustomization.callback(): Invoked! Setting up SC and firing.");this.setup();this.fireSiteCustomization()}};n.prototype.setup=function(e){if(e||!this.initialized){if(void 0!==this.configuration.experiences){var n=this.configuration.experiences||{},o=t.Shims.keys(n)||[];t.Utilities.Logging.log("SiteCustomization.setup(): Wrapping ".concat(o.length," experiences for setup"));for(var r in n){var a=n[r],s=new i(a);s&&(this.wrappedExperiences[s.id]=s)}this.initialized=!0}}else t.Utilities.Logging.log("SiteCustomization.setup(): already initilaized! not running setup again.")};n.prototype.fireSiteCustomization=function(){var e=this;return t.ErrorReporter.wrap(function(){var i=t.IpApi.experiences;t.Utilities.Logging.log("fireSiteCustomization(): Running for IP API experiences: ".concat(JSON.stringify(i)));if(!i){t.Utilities.Logging.log("fireSiteCustomization(): Error firing SC experience. IP API response does not contain valid experiences.");return!1}for(var n=Object.keys(i).map(function(t){return i[t]}),o=e.sortExperiencesToFire(n),r=0;r<o.length;r++)if(e.applyExperience(o[r].id))return!0;return!1})()};n.prototype.sortExperiencesToFire=function(e){var i=this;if(!e||!Array.isArray(e)||0===e.length){t.Utilities.Logging.log("sortExperiencesToFire(): No expereinces returned by IP API: ".concat(JSON.stringify(e)));return[]}e.sort(function(e,n){var o=i.wrappedExperiences[e.id]?i.wrappedExperiences[e.id].priority:null,r=i.wrappedExperiences[n.id]?i.wrappedExperiences[n.id].priority:null;o&&r||t.Utilities.Logging.log("sortExperiencesToFire(): Warning: priority is not defined ".concat(o," or ").concat(r));if(o===r||!o||!r){if(!e.updated_at||!n.updated_at){t.Utilities.Logging.log("sortExperiencesToFire(): Warning: updated_at is not defined ".concat(e.updated_at," or ").concat(n.updated_at));return 0}return new Date(n.updated_at).getTime()-new Date(e.updated_at).getTime()}return r-o});return e};n.prototype.fireExperienceById=function(e){this.setup();t.Utilities.Logging.log("fireExperienceById(): Firing by experience id: ".concat(e));return this.applyExperience(e,!0)};n.prototype.fireExperienceByQueryParameter=function(){var e=t.Utilities.getQueryParam(this.SC_QUERY_PARAMETER_FORCE_FIRE);if(e){t.Utilities.Logging.log("fireExperienceByQueryParameter(): Firing experience id: ".concat(e," now"));this.setup();return this.applyExperience(e,!0)}t.Utilities.Logging.log('fireExperienceByQueryParameter(): Not firing experience id: "'.concat(e,'" as it is not valid'));return!1};n.prototype.applyExperience=function(e,i){void 0===i&&(i=!1);t.Utilities.Logging.log("applyExperience(): Requested to apply Experience ID: ".concat(e," with forceRun of ").concat(i));if(e&&this.wrappedExperiences.hasOwnProperty(e)){var n=this.wrappedExperiences[e];if(n)return i?n.forceRun():n.run();t.Utilities.Logging.log("applyExperience(): Experience ID: ".concat(e," modobj not truthy: ").concat(JSON.stringify(n)));return!1}t.Utilities.Logging.log("applyExperience(): Experience ID: ".concat(e," not found in ").concat(JSON.stringify(this.wrappedExperiences,null,4)));return!1};return n}(t.BaseModule);t.SiteCustomizationModule=e;var i=function(){function e(t){this.exp=t;this.isEnabled=!1;this.priority=null;this.id="";this.name="";this.pages=t.pages||[];this.pages instanceof Array||(this.pages=[this.pages]);this.isEnabled=t.isEnabled||!1;this.name=t.name||"";this.id=t.id||"";this.priority=t.priority||5e3;this.modify=t.modify||function(){}}e.prototype.forceRun=function(){try{t.Utilities.Logging.log("Experience.forceRun: running modify function for: ".concat(this.name));this.modify.call(document);return!0}catch(e){e.name=t.Utilities.Constants.MODIFICATION_ERROR;throw e}};e.prototype.run=function(){if(!this.isEnabled){t.Utilities.Logging.log("Experience.run(): Experience named: ".concat(this.name," is currently disabled, will not fire."));return!1}if(!this.doesPageMatch()){t.Utilities.Logging.log("Experience.run(): SiteCustomization modify ".concat(this.name," not fired. no URL match with: ").concat(JSON.stringify(this.pages)));return!1}t.Utilities.Logging.log("Experience.run(): Experience named: ".concat(this.name," url matched and will run."));return this.forceRun()};e.prototype.doesPageMatch=function(){t.Utilities.Logging.log("Experience.doesPageMatch(): Experience named: ".concat(this.name," checking these URLs: ").concat(JSON.stringify(this.pages)));for(var e=0;e<this.pages.length;e++)if(t.Utilities.isCurrentPage(this.pages[e]||""))return!0;return!1};return e}();t.Experience=i}(t||(t={}));var t;!function(t){var e=function(){function e(){}e._callback=function(e){if(e.domain||e.person){e=e.domain||e.person;t.Utilities.flatten(e);this.CompanyProfile=e}else t.Utilities.Logging.log("Demandbase.Domain: No company profile available for domain: ".concat(this.getDomain()))};e.load=function(){if("function"==typeof t.Config.getDomain&&void 0!==this.key){var e="",i={};e=this.useTestValue?this.testValue:this.getDomain();i={key:this.key,callback:"Demandbase.Domain._callback",query:e,src:"tag"};t.Utilities.Logging.log("Calling Domain API at: ".concat(this.domainAPIUrl));t.Utilities.insertScript(t.Utilities.Api.buildApiUrl(this.domainAPIUrl,i),"db_domain_api")}else t.Utilities.Logging.log("Domain API query cancelled - check auth key or Config.getDomain")};e.getDomain=function(){if(this.useTestValue)return this.testValue;if("function"==typeof t.Config.getDomain)return t.Config.getDomain.call(t.Config);t.Utilities.Logging.log("Warning: Config.getDomain fcn not defined.");return"getDomain function is not defined"};e.key=t.Utilities.dig(t,"Config","key")||t.Utilities.dig(t,"Config","analytics","key")||t.Utilities.dig(t,"Config","ads","key")||t.Utilities.dig(t,"Config","forms","key")||"ERR_NO_AUTH_KEY";e.CompanyProfile=null;e.domainAPIUrl=t.Utilities.dig(t,"Config","domainAPI","url")||window.Demandbase.Utilities.Constants.URL_DOMAIN_API;e.useTestValue="true"===t.Utilities.getQueryParam(t.Utilities.Constants.QS_USE_TEST_DOMAIN)||t.Config.useTestDomain||!1;e.testValue=t.Utilities.getQueryParam(t.Utilities.Constants.QS_QUERY_DOMAIN)||t.Config.testDomain||"No Test Domain Set";return e}();t.Domain=e}(t||(t={}));if(void 0===window.__db)var v={segments:null,conditions:null};window.Demandbase.DBCondition=function(e,i,n,o,r){this.name=e;this.attributeValue=i;this.operator=n;this.value=o;this.attributeName=r;this._checkValue=function(e){switch(n){case"equals":return this.attributeValue==e;case"not equals":return this.attributeValue!==e;case"contains":return-1!==t.Shims.indexOf(this.attributeValue,e);default:return!1}};this.evaluate=function(){n=this.operator.toLowerCase();n=window.Demandbase.DBCondition.prototype.supportedOperators[n];if("object"==typeof this.value){for(var t in this.value)if(!0===this._checkValue(this.value[t]))return!0;return!1}return this._checkValue(this.value)}};window.Demandbase.DBCondition.prototype.name="DBCondition";window.Demandbase.DBCondition.prototype.supportedOperators={"=":"equals","==":"equals",equal:"equals",equals:"equals","!=":"not equals","!==":"not equals","not equal":"not equals","not equals":"not equals",contains:"contains",contain:"contains"};window.Demandbase.DBConditionBuilder={isValid:function(t){for(var e=["name","attributeValue","operator","value","attributeName"],i=0;i<e.length;i++)if(void 0===t[e[i]])return!1;return!0},build:function(t,e){if(t&&!t.name)return null;if(void 0!==t.constructor.prototype.name&&"DBCondition"===t.constructor.prototype.name)return t;t.attributeName||(t.attributeName=t.attribute||"NO_ATTR_SET");t.attributeValue=e[t.attribute]||"";if(!this.isValid(t))return null;var i=t.name,n=t.attributeValue,o=t.operator,r=t.value,a=t.attributeName;return new window.Demandbase.DBCondition(i,n,o,r,a)}};var w=function(e,i){this.name=e;this.rules=[];this.operator="";this.addCondition=function(e){if(!(e&&e.evaluate||void 0!==e.constructor.prototype.name&&"DBCondition"===e.constructor.prototype.name)){var e=window.Demandbase.DBConditionBuilder.build(e,window.Demandbase.Segments.CompanyProfile);if(!e)throw new Error("Invalid Condition: ".concat(e.name));t.Utilities.Logging.log("DBSegmentBuilder converted condition successfully...")}this.rules.push(e);switch(this.operator||w.prototype.supportedOperators.any){case"and":return this.value=this.value&&e.evaluate();case"or":return this.value=this.value||e.evaluate();default:return e.evaluate()}};this.value=this.addCondition(i)};w.prototype.name="DBSegment";w.prototype.supportedOperators={"&&":"and","&":"and",and:"and","||":"or","|":"or",or:"or",any:"or",all:"and"};window.Demandbase.DBSegmentBuilder={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},isValid:function(t){for(var e=["name","operator","rules"],i=0;i<e.length;i++)if(void 0===t[e[i]])return!1;return!!this.isArray(t.rules)},build:function(t){if(!this.isValid(t))return null;var e,i=t.name,n=t.rules[0],o=t.operator;if(n){e=new w(i,n);e.operator=w.prototype.supportedOperators[o]||w.prototype.supportedOperators.any;if(t.rules.length>1)for(var r=1;r<t.rules.length;r+=1){var n=t.rules[r];if(void 0===n.constructor.prototype.name||"DBCondition"!==n.constructor.prototype.name){var a=window.Demandbase.DBConditionBuilder.build(n,void 0);a&&(n=a)}e.addCondition(n)}return e}}};window.Demandbase.Segments=window.Demandbase.Segments||{name:"Demandbase Segments",CompanyProfile:null,AccountWatchVisitor:!1,IsCompany:!1,version:"1.2.2",_debug:!1,_allConditions:[],_allSegments:[],_isInitialized:!1,_setup:function(){this._isInitialized&&this._reset();this.CompanyProfile||!window.Demandbase.IP&&!window.Demandbase.Domain||(this.CompanyProfile=window.Demandbase.IP.CompanyProfile||window.Demandbase.Domain.CompanyProfile||{});"Detailed"===this.CompanyProfile.information_level&&(this.IsCompany=!0);for(var e in this.CompanyProfile)this.CompanyProfile.hasOwnProperty(e)&&0===t.Shims.indexOf(e,"watch_list_")&&(this.AccountWatchVisitor=!0);for(var i in this._allConditions)this._allConditions.hasOwnProperty(i)&&this._allConditions[i]&&(void 0===this._allConditions[i].constructor.prototype.name||"DBCondition"!==this._allConditions[i].constructor.prototype.name)&&this.add("condition",this._allConditions[i]);for(var n in this._allSegments)this._allSegments.hasOwnProperty(n)&&this._allSegments[n].name&&(void 0===this._allSegments[n].constructor.prototype.name||"DBSegment"!==this._allSegments[n].constructor.prototype.name)&&this.add("segment",this._allSegments[n])},_reset:function(){this._allConditions=t.Config.conditions||v.conditions||[];this._allSegments=t.Config.segments||v.segments||[]},load:function(){t.Utilities.Callbacks.registerCallback(this.init.bind(this))},init:function(e){window.Demandbase.Segments._debug=t.Utilities.Logging.debug||!1;window.Demandbase.Segments._allConditions=t.Config.conditions||v.conditions||[];window.Demandbase.Segments._allSegments=t.Config.segments||v.segments||[];var i=window.Demandbase.Segments;i.CompanyProfile=e;i._setup();i._isInitialized=!0},getActiveSegments:function(){var t=[];for(var e in this._allSegments)this._allSegments.hasOwnProperty(e)&&this._allSegments[e].value&&t.push(this._allSegments[e]);return t},getInactiveSegments:function(){var t=[];for(var e in this._allSegments)this._allSegments.hasOwnProperty(e)&&(this._allSegments[e].value||t.push(this._allSegments[e]));return t},add:function(e,i){if(!e||!i||i=={}){t.Utilities.Logging.log("Demandbase.Segments.add operation failed due to invalid/empty parameters.");return null}if("condition"===e){for(var n=void 0,o=this._allConditions.length,r=0;r<this._allConditions.length;r++)if(this._allConditions[r].name===i.name){o=r;break}n=window.Demandbase.DBConditionBuilder.build(i,this.CompanyProfile);n?this._allConditions[o]=n:t.Utilities.Logging.log("Invalid Condition (not created) from: ".concat(t.Shims.JSON.stringify(i)));if(void 0===i.standalone||!1!==i.standalone){var a=i.name;this.add("segment",{name:a,rules:[a],operator:w.prototype.supportedOperators.any})}}else if("segment"===e){if("segment"!==this.isValid(i))return null;for(var s=(i.name,void 0),l=void 0,c=this._allSegments.length,u=i.rules||[],d=0;d<this._allSegments.length;d++)if(this._allSegments[d].name===i.name){c=d;break}for(var g=0;g<u.length;g++){var f=u[g];if(!w.prototype.supportedOperators[f]){w.prototype.supportedOperators[f]||(l=this.get("condition",f));l?u[g]=l:t.Utilities.Logging.log("Segment: ".concat(i," uses a Condition (").concat(u[g],") that is not defined."))}}i.rules=u;s=window.Demandbase.DBSegmentBuilder.build(i);if(s){this._allSegments[c]=s;if(this.hasOwnProperty(s.name))this[s.name]=s;else try{Object.defineProperty(this,s.name,{value:s.value,writable:!0})}catch(t){window.Demandbase.Segments[s.name]=s.value}}else t.Utilities.Logging.log("Invalid Segment (not created) from: ".concat(t.Shims.JSON.stringify(i)))
}else t.Utilities.Logging.log('Invalid "type" parameter ('.concat(e,') passed to "add" function.  Must be "segment" or "condition".'))},get:function(e,i){var n=[];1===arguments.length&&(i=e);if("condition"===e){if(void 0!==i.constructor.prototype.name&&"DBCondition"===i.constructor.prototype.name)return i;n=this._allConditions}else{if(void 0!==i.constructor.prototype.name&&"DBSegment"===i.constructor.prototype.name)return i;n=this._allSegments}for(var o in n)if(this._allConditions[o].name===i)return this._allConditions[o];w.prototype.supportedOperators[i]||t.Utilities.Logging.log('No item with type: "'.concat(e,'" found with name: ').concat(i));return null},isValid:function(e){var i,n=["name","rules"],o=["name","attribute","operator","value"];if(!e)return!1;if(void 0!==e.constructor.prototype.name&&"DBSegment"===e.constructor.prototype.name)return"segment";if(void 0!==e.constructor.prototype.name&&"DBCondition"===e.constructor.prototype.name)return"condition";try{if(e.hasOwnProperty("name")&&e.hasOwnProperty("rules")){if("object"==typeof e.rules)return"segment"}else for(var r in n)if(!e.hasOwnProperty(n[r])){t.Utilities.Logging.log('Invalid DBSegment definition.  Missing property:"'.concat(n[r],'"'));return!1}if(i)return i;for(var r in o){if(!e.hasOwnProperty(o[r])){t.Utilities.Logging.log('Invalid DBCondition definition.  Missing property:"'.concat(o[r],'"'));return!1}i="condition"}return i}catch(e){t.ErrorReporter.send(e);return!1}}};var t;!function(t){function e(e){if(t.Config.allowedDomains&&t.Config.allowedDomains.length)for(var i=0;i<t.Config.allowedDomains.length&&!(document.location&&document.location.href&&document.location.href.indexOf(t.Config.allowedDomains[i])>=0);i++)if(t.Config.allowedDomains.length-1===i){t.Utilities.Logging.log("Demandbase.initialize: Domain ".concat(document.location.href," - not in allowed list"));return}if(!t._isInitialized||e){t._isInitialized=!0;null==t.Config.isInIFrame&&(t.Config.isInIFrame=t.Utilities.detectIFrame());t.AssetReporter=new t.AssetReporterModule;t.AssetReporter.isEnabled()&&t.AssetReporter.initialize();t.Advertising=new t.AdvertisingModule;t.Ads=t.Advertising;if(t.Advertising.isEnabled()){t.IpApiReportingOnly=new t.IpApiModule;t.Advertising.initialize()}t.IpApi=new t.IpApiModule;t.IP=t.IpApi;t.IpApi.getOnce();window.Demandbase.Segments.load();t.Config.callback&&t.Utilities.Callbacks.registerCallback(t.Config.callback);t.FormsLoader=new t.FormsLoaderModule;if(t.FormsLoader.isEnabled()){t.FormsLoader.initialize();window.Demandbase.utils.loadFormModule=t.FormsLoader.load.bind(t.FormsLoader);window.Demandbase.utils.isFormPage=t.FormsLoader.isFormPage.bind(t.FormsLoader)}t.Connectors.Google_Analytics=new t.Google_AnalyticsModule;t.Connectors.Google_Analytics.isEnabled()&&t.Connectors.Google_Analytics.initialize();t.Connectors.Google_TagManager=new t.Google_TagManagerModule;t.Connectors.Google_TagManager.isEnabled()&&t.Connectors.Google_TagManager.initialize();t.Content=new t.ContentModule;t.Content.isEnabled()&&t.Content.initialize();t.SiteCustomization=new t.SiteCustomizationModule;t.SiteCustomization.isEnabled()&&t.SiteCustomization.initialize();if("function"==typeof t.Config.getDomain){t.Config.getDomain()&&t.Domain.load()}t.EmailDomainReporter=new t.EmailDomainReporterModule;t.EmailDomainReporter.isEnabled()&&t.EmailDomainReporter.initialize();var n={Advertising:t.AdvertisingModule,AssetReporter:t.AssetReporterModule,Content:t.ContentModule,ErrorReporter:t.ErrorReporterModule,Google_Analytics:t.Google_AnalyticsModule,SiteCustomization:t.SiteCustomization};new t.ModuleFactory(t.Config,n,t).build();"function"==typeof t.Config.onLoad&&t.Config.onLoad.call(t)}}t.initialize=e}(t||(t={}));t.Config.Google_Analytics={fieldMap:null};t.Config.clientId="3b49d360d41fecf7";t.Config.key="qnInLeYwS4OktjLY7U8GiTuOgTst6M244qfe0JNW";t.Config.Advertising={enableBW:!0};t.ErrorReporter=new t.ErrorReporterModule;t.ErrorReporter.initialize();t.ErrorReporter.wrap(t.initialize.bind(t))()}(window.Demandbase);
//# sourceMappingURL=3b49d360d41fecf7.min.js.map