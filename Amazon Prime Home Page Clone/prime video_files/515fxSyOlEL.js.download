(()=>{var e,t={"./src/entrypoints/hydration/nav.tsx":(e,t,a)=>{"use strict";var s=a("./src/util/hydration/hydrateWidgets.tsx"),n=a("./node_modules/react/index.js"),r=a("./src/util/wrappers/ArgsContext.tsx"),i=a("./src/util/wrappers/LoggersContext.tsx"),o=a("./src/util/utils/device.ts");const l=({href:e,rel:t,isHighlighted:a,text:s})=>n.createElement("a",{href:e,rel:t,className:a?"pv-highlighted pv-ticked":""},s),c=({label:e,locale:t,isHighlighted:a,languageToken:s,url:r,context:i})=>{const l=(0,o.l6)(i);return n.createElement("form",{action:r,method:"POST"},n.createElement("input",{type:"hidden",name:"language",value:t}),!l&&n.createElement("input",{type:"hidden",name:"token",value:s}),!l&&n.createElement("input",{type:"hidden",name:"persistLanguage",value:"1"}),n.createElement("input",{type:"submit",value:e,className:a?"pv-highlighted pv-ticked":""}))},v=({languages:e,locales:t,languageToken:a,context:s})=>e.length>0?e.map(((e,t)=>e.url?n.createElement("li",{key:`${t}-${e.locale}`,role:"menuitem"},n.createElement(c,{isHighlighted:e.isHighlighted,label:e.label,locale:e.locale,languageToken:a,url:e.url,context:s})):n.createElement(n.Fragment,null))):t.map(((e,t)=>n.createElement("li",{key:`${t}-${e.text}`,role:"menuitem"},n.createElement(l,e)))),p=e=>n.createElement("li",{className:"pv-subnav-locales "+(e.removeIcon?"pv-subnav-no-icon":"")},n.createElement("input",{type:"checkbox",id:"pv-subnav-locales-menu-trigger",className:"pv-subnav-locales-toggle avu-screen-reader-only",name:"menu"}),n.createElement("label",{htmlFor:"pv-subnav-locales-menu-trigger",className:"pv-subnav-locales-menu-label"},e.text),n.createElement("ul",{role:"menu","aria-label":"submenu",className:"pv-subnav-locales-dropdown"},v(e))),h=e=>n.createElement("div",{className:"pv-nav-locales pv-nav-dropl",id:"pv-nav-locales"},n.createElement("input",{type:"checkbox",autoComplete:"off",name:"pv-nav-locales",id:"pv-nav-locales-menu-trigger",className:"pv-nav-dropl__input avu-screen-reader-only"}),n.createElement("label",{htmlFor:"pv-nav-locales-menu-trigger",className:"pv-nav-dropl__label"},n.createElement("span",{className:"pv-nav-locales-icon"},e.text)),n.createElement("ul",{role:"menu"},n.createElement("ol",{className:"dv-col",role:"menu"},v(e))));var m=a("./src/util/utils/imageUtils/imageUtils.tsx");const u=e=>({backgroundImage:"url("+e+")"});class d extends n.Component{constructor(e){super(e),this.state={isReducedMotion:!1}}componentDidMount(){const e=window.matchMedia("(prefers-reduced-motion: reduce)");this.setState({isReducedMotion:e&&e.matches})}render(){const e=this.state.isReducedMotion&&this.props.imageURL&&"gif"===this.props.imageURL.split(".").pop()?(e=>encodeURI(new m.e(e).forceFormat("png").getImageUrl()))(this.props.imageURL):this.props.imageURL;return n.createElement("a",{href:this.props.targetUrl,className:"pv-nav-logo",id:"pv-nav-logo"},n.createElement("div",{className:"pv-brand-logo",style:e?u(e):{}},this.props.altText))}}var _=a("./node_modules/@amzn/dvui/dist/Link.js");let E;!function(e){e.PV_NAV_HOME="pv-nav-home",e.PV_NAV_MOVIES="pv-nav-movies",e.PV_NAV_TV_SHOWS="pv-nav-tv-shows",e.PV_NAV_KIDS="pv-nav-kids",e.PV_NAV_CHANNELS="pv-nav-channels",e.PV_NAV_STORE="pv-nav-store",e.PV_NAV_RENT_OR_BUY="pv-nav-rent-or-buy",e.PV_NAV_MYSTUFF="pv-nav-mystuff",e.PV_NAV_MYSTUFF_DROPDOWN="pv-nav-mystuff-dropdown",e.PV_NAV_MYSTUFF_WL="pv-nav-mystuff-wl",e.PV_NAV_MYSTUFF_LIBRARY="pv-nav-mystuff-library",e.PV_NAV_MYSTUFF_CHANNELS="pv-nav-mystuff-channels",e.PV_NAV_MYSTUFF_FOLLOWING="pv-nav-mystuff-following",e.PV_NAV_ORIGINALS="pv-nav-originals",e.PV_NAV_YOUR_ACCOUNT="pv-nav-your-account",e.PV_NAV_YOUR_WATCHLIST="pv-nav-your-watchlist",e.PV_NAV_PURCHASES_AND_RENTALS="pv-nav-purchases-and-rentals",e.PV_NAV_SETTINGS="pv-nav-settings",e.PV_NAV_WATCH_ANYWHERE="pv-nav-watch-anywhere",e.PV_NAV_HELP="pv-nav-help",e.PV_NAV_GETTING_STARTED="pv-nav-getting-started",e.PV_NAV_SIGN_IN="pv-nav-sign-in",e.PV_NAV_SIGN_OUT="pv-nav-sign-out",e.PV_NAV_EPL="pv-nav-epl",e.PV_NAV_SALE="pv-nav-sale",e.vPV_NAV_BLURAY="pv-nav-bluray",e.PV_NAV_SPORTS="pv-nav-sports",e.PV_NAV_PRIME_FILTERS="pv-nav-prime-filters",e.PV_NAV_OLYMPIC_GAMES="pv-nav-olympic-games",e.PV_NAV_LOCALE_PREFIX="pv-nav-locale",e.PV_NAV_CATEGORIES="pv-nav-categories",e.PV_NAV_CATEGORIES_MOVIES="pv-nav-categories-movies",e.PV_NAV_CATEGORIES_TVSHOWS="pv-nav-categories-tv-shows",e.PV_NAV_CATEGORIES_TV="pv-nav-categories-tv",e.PV_NAV_CATEGORIES_INCLUDED_WITH_PRIME="pv-nav-categories-included-with-prime",e.PV_NAV_CATEGORIES_KIDS="pv-nav-categories-kids",e.PV_NAV_CATEGORIES_ORIGINALS="pv-nav-categories-originals",e.PV_NAV_CATEGORIES_RECENTLY_ADDED="pv-nav-categories-recently-added",e.PV_NAV_CATEGORIES_TOP_RATED="pv-nav-categories-top-rated",e.PV_NAV_CATEGORIES_4K="pv-nav-categories-4k-uhd",e.PV_NAV_CATEGORIES_CHRISTMAS="pv-nav-categories-christmas",e.PV_NAV_CATEGORIES_FEATURED_DEALS="pv-nav-categories-featured-deals",e.PV_NAV_CATEGORIES_LEAVING_SOON="pv-nav-categories-leaving-soon",e.PV_NAV_CATEGORIES_NEW_RELEASES="pv-nav-categories-new-releases",e.PV_NAV_CATEGORIES_SPORTS="pv-nav-categories-sports",e.PV_NAV_CATEGORIES_EXPLORER="pv-nav-categories-prime-video-explorer",e.PV_NAV_CATEGORIES_COMING_SOON="pv-nav-categories-coming-soon",e.PV_NAV_CATEGORIES_SHORTS="pv-nav-categories-shorts",e.PV_NAV_CATEGORIES_DOWNLOADS="pv-nav-categories-download",e.PV_NAV_CATEGORIES_EUROPEAN_CONTENT="pv-nav-categories-european-content",e.PV_NAV_CATEGORIES_2020="pv-nav-categories-2020",e.PV_NAV_WINDOWS_DOWNLOADS="pv-nav-windows-downloads",e.PV_NAV_WINDOWS_SETTINGS="pv-nav-windows-settings",e.PV_NAV_WINDOWS_SEARCH="pv-nav-windows-search",e.PV_NAV_TOP_CATEGORIES="pv-nav-top-categories",e.PV_NAV_TOP_CATEGORIES_ORIGINALS_AND_EXCLUSIVES="pv-nav-top-categories-originals-and-exclusives",e.PV_NAV_TOP_CATEGORIES_INCLUDED_WITH_PRIME="pv-nav-top-categories-included-with-prime",e.PV_NAV_TOP_CATEGORIES_ORIGINALS="pv-nav-top-categories-originals",e.PV_NAV_TOP_CATEGORIES_TV="pv-nav-top-categories-tv",e.PV_NAV_TOP_CATEGORIES_MOVIES="pv-nav-top-categories-movies",e.PV_NAV_TOP_CATEGORIES_KIDS="pv-nav-top-categories-kids",e.PV_NAV_TOP_CATEGORIES_SPORTS="pv-nav-top-categories-sports",e.PV_NAV_TOP_CATEGORIES_RECENTLY_ADDED_MOVIES="pv-nav-top-categories-recently-added-movies",e.PV_NAV_TOP_CATEGORIES_RECENTLY_ADDED_TV="pv-nav-top-categories-recently-added-tv",e.PV_NAV_TOP_CATEGORIES_DOWNLOAD="pv-nav-top-categories-download",e.PV_NAV_TOP_CATEGORIES_NFL="pv-nav-top-categories-nfl",e.PV_NAV_TOP_CATEGORIES_LIGUE_1="pv-nav-top-categories-ligue1",e.PV_NAV_TOP_CATEGORIES_WINTER_OLYMPICS="pv-nav-top-categories-winter-olympics",e.PV_NAV_GENRES="pv-nav-genres",e.PV_NAV_GENRES_WORLD_CINEMA="pv-nav-genres-worldcinema",e.PV_NAV_GENRES_JAPANESE_MOVIES="pv-nav-genres-japanese-movies",e.PV_NAV_GENRES_JAPAN_DRAMA="pv-nav-genres-japan-drama",e.PV_NAV_GENRES_KOREAN_DRAMA="pv-nav-genres-korean-drama",e.PV_NAV_GENRES_ACTION_ADVENTURE="pv-nav-genres-actionadventure",e.PV_NAV_GENRES_COMEDY="pv-nav-genres-comedy",e.PV_NAV_GENRES_BLACK_STORIES="pv-nav-genres-black-stories",e.PV_NAV_GENRES_DRAMA="pv-nav-genres-drama",e.PV_NAV_GENRES_CRIME="pv-nav-genres-crime",e.PV_NAV_GENRES_DOCUMENTARIES="pv-nav-genres-documentaries",e.PV_NAV_GENRES_KIDS_AND_FAMILY="pv-nav-genres-kidsfamily",e.PV_NAV_GENRES_FANTASY="pv-nav-genres-fantasy",e.PV_NAV_GENRES_FOREIGN_DRAMA="pv-nav-genres-foreign-drama",e.PV_NAV_GENRES_HORROR="pv-nav-genres-horror",e.PV_NAV_GENRES_INTERNATIONAL="pv-nav-genres-international",e.PV_NAV_GENRES_REALITY_TV="pv-nav-genres-reality-tv",e.PV_NAV_GENRES_LGBTQ="pv-nav-genres-lgbtq",e.PV_NAV_GENRES_MUSICALS="pv-nav-genres-musicals",e.PV_NAV_GENRES_ROMANCE="pv-nav-genres-romance",e.PV_NAV_GENRES_SCIENCE_FICTION="pv-nav-genres-science-fiction",e.PV_NAV_GENRES_THRILLER="pv-nav-genres-thriller",e.PV_NAV_GENRES_MYSTERY_THRILLER="pv-nav-genres-mystery-thriller",e.PV_NAV_GENRES_INDIAN_TV_MOVIES="pv-nav-genres-indiantvmovies",e.PV_NAV_GENRES_ANIME="pv-nav-genres-anime",e.PV_NAV_GENRES_MILITARY_AND_WAR="pv-nav-genres-military-and-war",e.PV_NAV_GENRES_SPORTS="pv-nav-genres-sports",e.PV_NAV_GENRES_COMING_OF_AGE="pv-nav-genres-coming-of-age",e.PV_NAV_AUDIO_LANGUAGES="pv-nav-audio-languages",e.PV_NAV_AUDIO_LANGUAGES_ENGLISH="pv-nav-audio-languages-english",e.PV_NAV_AUDIO_LANGUAGES_HINDI="pv-nav-audio-languages-hindi",e.PV_NAV_AUDIO_LANGUAGES_TELUGU="pv-nav-audio-languages-telugu",e.PV_NAV_AUDIO_LANGUAGES_TAMIL="pv-nav-audio-languages-tamil",e.PV_NAV_AUDIO_LANGUAGES_KANNADA="pv-nav-audio-languages-kannada",e.PV_NAV_AUDIO_LANGUAGES_MALAYALAM="pv-nav-audio-languages-malayalam",e.PV_NAV_AUDIO_LANGUAGES_PUNJABI="pv-nav-audio-languages-punjabi",e.PV_NAV_AUDIO_LANGUAGES_MARATHI="pv-nav-audio-languages-marathi",e.PV_NAV_AUDIO_LANGUAGES_BENGALI="pv-nav-audio-languages-bengali",e.PV_NAV_AUDIO_LANGUAGES_GUJARATI="pv-nav-audio-languages-gujarati",e.PV_NAV_OTHER_CATEGORIES="pv-nav-other-categories",e.PV_NAV_OTHER_CATEGORIES_NEW_RELEASES="pv-nav-other-categories-new-releases",e.PV_NAV_OTHER_CATEGORIES_DRAMA="pv-nav-other-categories-drama",e.PV_NAV_OTHER_CATEGORIES_ACTION_ADVENTURE="pv-nav-other-categories-actionadventure",e.PV_NAV_OTHER_CATEGORIES_ROMANCE="pv-nav-other-categories-romance",e.PV_NAV_OTHER_CATEGORIES_COMEDY="pv-nav-other-categories-comedy",e.PV_NAV_OTHER_CATEGORIES_THRILLER="pv-nav-other-categories-thriller",e.PV_NAV_OTHER_CATEGORIES_HORROR="pv-nav-other-categories-horror",e.PV_NAV_OTHER_CATEGORIES_LEAVING_SOON="pv-nav-other-categories-leaving-soon",e.PV_NAV_OTHER_CATEGORIES_RECENTLY_ADDED_MOVIES="pv-nav-other-categories-recently-added-to-prime-movies",e.PV_NAV_OTHER_CATEGORIES_RECENTLY_ADDED_TV="pv-nav-other-categories-recently-added-to-prime-tv",e.PV_NAV_OTHER_CATEGORIES_RECENTLY_ADDED_TO_PRIME="pv-nav-other-categories-recently-added-to-prime",e.PV_NAV_OTHER_CATEGORIES_TOP_RATED="pv-nav-other-categories-top-rated",e.PV_NAV_OTHER_CATEGORIES_AWARD_WINNERS="pv-nav-other-categories-award-winners",e.PV_NAV_OTHER_CATEGORIES_AUDIO_DESCRIPTIONS="pv-nav-other-categories-audio-descriptions",e.PV_NAV_OTHER_CATEGORIES_DEALS="pv-nav-other-categories-deals",e.PV_NAV_OTHER_CATEGORIES_COMING_SOON="pv-nav-other-categories-coming-soon",e.PV_NAV_OTHER_CATEGORIES_WATCH_PARTY="pv-nav-other-categories-watch-party",e.PV_NAV_OTHER_CATEGORIES_EUROPEAN_CONTENT="pv-nav-other-categories-european-content",e.PV_NAV_OTHER_CATEGORIES_LIMITED_TIME_ON_PRIME="pv-nav-other-categories-only-limited-time-at-prime",e.PV_NAV_OTHER_CATEGORIES_LINEAR_BROADCAST="pv-nav-other-categories-linear-broadcast",e.PV_NAV_OTHER_CATEGORIES_HALLOWEEN="pv-nav-other-categories-halloween"}(E||(E={}));var g=a("./node_modules/classnames/index.js");const N=e=>{var t;return(null===(t=e.features)||void 0===t?void 0:t.includes("heading"))||!1};function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},S.apply(this,arguments)}const A=({text:e,links:t,isElcano:a})=>{const s=t.map(((e,t)=>{var a;const s=e.id===E.PV_NAV_CATEGORIES_2020;const r=Boolean(e.links&&e.links.length),i=null===(a=e.links)||void 0===a?void 0:a.map(((e,t)=>{const a=N(e)?"categories-li-heading":"categories-li";return n.createElement("li",{key:`navsublistitem-${t}`,className:s?a:"subitem"},N(e)?n.createElement("h4",{className:g({"pv-category-link":s})},e.text):n.createElement("a",{className:g({"pv-category-link":s}),href:e.href},e.text))})),o=n.createElement(n.Fragment,null,r?n.createElement("li",{key:t,className:"pv-nav-main-menu-subdropdown"},n.createElement("input",{type:"checkbox",autoComplete:"off",name:"pv-nav-main-menu-subdropdown",id:`pv-nav-main-menu-subdropdown-trigger-${t}`}),n.createElement("label",{htmlFor:`pv-nav-main-menu-subdropdown-trigger-${t}`,className:"pv-nav-main-menu-subdropdown-label"},n.createElement("a",{href:e.id===E.PV_NAV_MYSTUFF_DROPDOWN&&e.href?e.href:void 0,className:g({"pv-highlighted":e.isHighlighted})},n.createElement("span",{className:"pv-nav-main-menu-subdropdown-text"},e.text))),i&&n.createElement("ul",{className:g("pv-nav-main-menu-subdropdown-flyout",{"pv-categories-dropdown pv-new-categories":s})},i),s&&e.links&&(e=>{const t=e=>t=>n.createElement("li",{key:`new-categories-item-${t.id}`,className:e,style:t.imageURL?{backgroundImage:`url(${t.imageURL})`,backgroundColor:"rgb(40,72,103)"}:void 0},n.createElement("a",{href:t.href,className:"categories-a"},t.text)),a=t("categories-li"),s=e.filter(N),r=e.indexOf(s[0]),i=e.indexOf(s[1]),o=e.indexOf(s[2]);return n.createElement("ul",{className:"pv-categories-dropdown pv-new-categories"},n.createElement("div",{className:"cat__wrapper"},n.createElement("div",{className:"cat_block cat_block--a"},n.createElement("div",{className:"cat_block--grid"},n.createElement("h3",null,e[r].text),n.createElement("ul",{className:"cat_panels"},e.slice(r+1).filter((e=>e.imageURL&&e.imageURL.length>0)).map(t("categories-top-li"))))),n.createElement("div",{className:"cat_separator"}),n.createElement("div",{className:"cat_block cat_block--flex"},n.createElement("div",{className:"cat_block--child"},n.createElement("h3",null,e[i].text),n.createElement("ul",{className:"cat_columns--2"},e.slice(i+1,o).map(a))),n.createElement("div",{className:"cat_block--child"},n.createElement("h3",null,e[o].text),n.createElement("ul",{className:"cat_columns--3"},e.slice(o+1).map(a))))))})(e.links)):n.createElement("li",{key:t},n.createElement(_.Link,S({},e,{className:g({"pv-highlighted":e.isHighlighted}),key:e.text}))));return o}));return n.createElement("div",{id:"pv-nav-main-menu",className:g("pv-nav-main-menu",{"pv-nav-main-menu-elcano":a})},n.createElement("input",{type:"checkbox",autoComplete:"off",id:"pv-nav-main-menu-trigger",className:"pv-nav-main-menu-switch avu-screen-reader-only"}),n.createElement("label",{htmlFor:"pv-nav-main-menu-trigger",className:"pv-nav-main-menu-label"},e),n.createElement("ul",{className:"pv-navigation-bar",role:"navigation"},s))},V=()=>n.createElement("div",{id:"pv-nav-main-menu",className:"pv-nav-main-menu"});var O=a("./src/util/api/WPSClient.ts"),I=a("./src/util/utils/dvstring/index.ts"),R=a("./node_modules/@amzn/dvui/dist/Button.js"),P=a("./node_modules/@amzn/dvui/dist/Modal.js");function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const f="DEFAULT_PROFILE",y="searchHistory";class C extends n.Component{constructor(e){super(e),T(this,"state",void 0),T(this,"searchBarContainer",void 0),T(this,"searchInput",void 0),T(this,"searchHistoryList",void 0),T(this,"searchSuggestedList",void 0),T(this,"searchForm",void 0),T(this,"hasSearchHistory",!1),T(this,"hasSearchSuggested",!1),T(this,"searchHistoryOn","T1"==this.props.searchHistory.treatment),T(this,"modal",n.createRef()),T(this,"WPS",void 0),T(this,"openModal",(()=>{var e;null===(e=this.modal.current)||void 0===e||e.open()})),T(this,"closeModal",(()=>{var e;null===(e=this.modal.current)||void 0===e||e.close()})),T(this,"initializeSearchHistory",(()=>{const{profiles:e}=this.props,t=localStorage.getItem(y),a=t&&JSON.parse(t),s=e&&e.activeProfile?e.activeProfile.id:f,n=a&&a[s]?a[s]:{terms:[],expirationDates:{}};let{terms:r,expirationDates:i}=n;const o=(new Date).getTime();for(let e=r.length-1;e>=0&&parseInt(i[r[e]],10)<o;e--)delete i[r[e]],r.splice(e,1);this.setState({searchHistoryByProfile:{terms:r,expirationDates:i}})})),T(this,"storeSearchHistory",(()=>{const{profiles:e}=this.props,t=localStorage.getItem(y),a=t&&JSON.parse(t),s=e&&e.activeProfile?e.activeProfile.id:f,{searchHistoryByProfile:n}=this.state,r=a?{...a,[s]:n}:{[s]:n};localStorage.setItem(y,JSON.stringify(r))})),T(this,"handleDocumentClick",(e=>{var t,a,s;const{searchInput:n}=this;null!==(t=this.searchBarContainer)&&void 0!==t&&t.contains(e.target)||this.clearSearchSuggestions(),n&&this.searchHistoryOn&&null!==(a=this.searchSuggestedList)&&void 0!==a&&a.contains(e.target)?(n.value=e.target.innerText,this.updateSearchHistory(n.value)):n&&this.searchHistoryOn&&null!==(s=this.searchHistoryList)&&void 0!==s&&s.contains(e.target)&&!this.searchHistoryList==e.target&&(this.submitSearchHistory(e.target.innerText),this.updateSearchHistory(n.value))})),this.state={searchHistory:[],searchSuggested:[],selectedSearchSuggestionId:-1},this.handleInput=this.handleInput.bind(this),this.handleReset=this.handleReset.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleDocumentClick=this.handleDocumentClick.bind(this),this.WPS=new O.eZ}render(){var e,t;const{props:a,state:s}=this,r=null===(e=a.searchFormAction)||void 0===e?void 0:e.query,i=r&&Object.keys(r).map((e=>n.createElement("input",{type:"hidden",name:e,key:e,value:r[e]}))),o=this.props.shouldCollapse?"pv-nav-search pv-nav-search-collapsed":"pv-nav-search",l=`pv-nav-search-suggestions ${this.hasSearchHistory&&this.searchHistoryOn?"pv-nav-search-history":""} ${this.hasSearchSuggested&&this.searchHistoryOn?"pv-nav-search-suggested":""}`,c=this.hasSearchHistory||this.hasSearchSuggested,v=n.createElement("ol",null,n.createElement("li",{className:"pv-nav-search-subheading suggested"},this.props.searchHistory.strings.suggested),n.createElement("ol",{ref:e=>{this.searchSuggestedList=e}},s.searchSuggested.map(((e,t)=>{const a=g({"pv-highlighted":t===s.selectedSearchSuggestionId},"pv-nav-search-suggestion-item"),r=(0,I.Wb)(e.text);return n.createElement("li",{className:"pv-nav-search-suggestion suggested"},n.createElement("a",{href:e.href,className:a,dangerouslySetInnerHTML:{__html:`${r}`}}))})))),p=n.createElement(P.Modal,{className:"pv-nav-search-clear-modal",modalId:"search-history",ref:this.modal,footer:n.createElement("div",null,n.createElement(R.PrimaryButton,{onClick:()=>{this.clearSearchHistory(),this.closeModal()}},this.props.searchHistory.strings.clearInfoButton),n.createElement(R.Button,{onClick:()=>this.closeModal()}," ",this.props.searchHistory.strings.cancel," ")),header:this.props.searchHistory.strings.clearInfoTitle},this.props.searchHistory.strings.clearInfoMessage),h=n.createElement("ol",null,n.createElement("li",{className:"pv-nav-search-subheading history"},this.props.searchHistory.strings.recent,n.createElement("button",{className:"pv-nav-search-clear",onClick:()=>this.openModal()},this.props.searchHistory.strings.clear),p),n.createElement("ol",{ref:e=>{this.searchHistoryList=e}},s.searchHistory.map(((e,t)=>{const a=g({"pv-highlighted":t+s.searchSuggested.length===s.selectedSearchSuggestionId},"pv-nav-search-suggestion-item"),r=(0,I.Wb)(e.text),i=r.replace(/<\/?strong>/g,"");return n.createElement("li",{className:"pv-nav-search-suggestion history"},n.createElement("input",{type:"reset",className:"pv-nav-search-delete-history",name:"reset",value:"Cancel",onClick:()=>{this.removeQueryFromHistory(i),this.fetchSearchHistory()}}),n.createElement("a",{href:e.href,className:a,dangerouslySetInnerHTML:{__html:`${r}`}}))}))));return n.createElement("div",{className:o,ref:e=>{this.searchBarContainer=e}},n.createElement("form",{className:"pv-nav-search-form",method:"GET",role:"search",action:null===(t=a.searchFormAction)||void 0===t?void 0:t.partialURL,onSubmit:this.handleSubmit,ref:e=>{this.searchForm=e}},n.createElement("label",{className:"pv-nav-screen-reader-only",htmlFor:"pv-search-nav"},a.altText),n.createElement("input",{type:"search",className:g({"pv-nav-search-query-search-history":this.hasSearchHistory&&this.searchHistoryOn},"pv-nav-search-query"),id:"pv-search-nav",required:!0,placeholder:a.searchFormPlaceholder,name:"phrase",autoComplete:"off",onInput:this.handleInput,onKeyUp:this.handleInput,onFocus:this.handleInput,onPaste:this.handleInput,onCut:this.handleInput,ref:e=>{this.searchInput=e}}),i,n.createElement("input",{type:"reset",className:"pv-nav-search-reset pv-nav-search-reset",name:"reset",value:"Cancel",onClick:this.handleReset,onReset:this.handleReset}),n.createElement("input",{type:"submit",className:"pv-nav-search-submit pv-nav-screen-reader-only"})),n.createElement("div",{className:l},n.createElement("ol",{className:c?"non-empty":""},n.createElement("li",null," ",v," "),n.createElement("li",null," ",h," "))))}componentDidMount(){window.addEventListener("click",this.handleDocumentClick),this.searchHistoryOn&&(window.addEventListener("beforeunload",this.storeSearchHistory),this.initializeSearchHistory()),this.props.searchPhrase&&this.searchInput&&(this.searchInput.value=this.props.searchPhrase)}componentWillUnmount(){window.removeEventListener("click",this.handleDocumentClick),this.searchHistoryOn&&window.removeEventListener("beforeunload",this.storeSearchHistory)}handleSubmit(e){this.state.selectedSearchSuggestionId>=0?e.preventDefault():this.searchInput&&this.searchHistoryOn&&this.updateSearchHistory(this.searchInput.value)}handleReset(){this.searchInput&&(this.searchInput.value=""),this.clearSearchSuggestions()}handleInput(e){const{props:t,state:a,searchInput:s}=this;if(t.searchSuggestionsEndpoint)if(!e.keyCode||38!==e.keyCode&&40!==e.keyCode)if(e.keyCode&&13===e.keyCode){if(a.selectedSearchSuggestionId>=0){if(a.selectedSearchSuggestionId<a.searchSuggested.length){var n;const e=a.searchSuggested[a.selectedSearchSuggestionId],t=null===(n=this.searchSuggestedList)||void 0===n?void 0:n.querySelector(`li:nth-child(${a.selectedSearchSuggestionId+1}) a`);t&&this.searchInput&&(this.searchInput.value=t.innerText),e.href&&window.location.assign(e.href)}if(this.setState({selectedSearchSuggestionId:-1}),this.searchHistoryOn){var r;s&&this.updateSearchHistory(s.value);const e=null===(r=this.searchHistoryList)||void 0===r?void 0:r.querySelector(`li:nth-child(${a.selectedSearchSuggestionId-this.state.searchSuggested.length+1}) a`);e&&this.submitSearchHistory(e.innerText)}e.preventDefault()}}else this.fetchSearchSuggestions(e.target.value),this.setState({selectedSearchSuggestionId:-1});else{const t=a.searchHistory.length+a.searchSuggested.length;t>0&&(38===e.keyCode?this.setState({selectedSearchSuggestionId:a.selectedSearchSuggestionId>0?a.selectedSearchSuggestionId-1:t-1}):40===e.keyCode&&this.setState({selectedSearchSuggestionId:a.selectedSearchSuggestionId<t-1?a.selectedSearchSuggestionId+1:0}),e.preventDefault())}}killSearchSuggestionsFetch(){this.state.searchSuggestionsFetchHandle&&window.clearTimeout(this.state.searchSuggestionsFetchHandle)}removeQueryFromHistory(e){var t,a,s,n;let r=null!==(t=null===(a=this.state.searchHistoryByProfile)||void 0===a?void 0:a.terms)&&void 0!==t?t:[],i=null!==(s=null===(n=this.state.searchHistoryByProfile)||void 0===n?void 0:n.expirationDates)&&void 0!==s?s:{};const o=r.indexOf(e);-1!==o&&r.splice(o,1),delete i[e],this.setState({searchHistoryByProfile:{terms:r,expirationDates:i}})}updateSearchHistory(e){const t=(0,I.Wb)(e.replace(/[@#%^*(){}|<>]/g,"").toLowerCase());if(/\S/.test(t)){var a,s,n,r;let e=null!==(a=null===(s=this.state.searchHistoryByProfile)||void 0===s?void 0:s.terms)&&void 0!==a?a:[],i=null!==(n=null===(r=this.state.searchHistoryByProfile)||void 0===r?void 0:r.expirationDates)&&void 0!==n?n:{};const o=e.indexOf(t);-1!==o&&e.splice(o,1);for(let t=50;t<=e.length;t++)delete i[e[t]],e.splice(e.length-1,1);e=[t].concat(e);const l=new Date;l.setMonth(l.getMonth()+18),i={...i,[t]:l.getTime()},this.setState({searchHistoryByProfile:{terms:e,expirationDates:i}})}}submitSearchHistory(e){if(this.searchForm&&this.searchInput){const t=this.searchInput.value.length;this.searchInput.value=e,this.searchForm.action=this.searchForm.action.concat(`_hist_${t}`),this.searchForm.submit()}}fetchSearchHistory(){var e,t,a;const s=null===(e=this.searchInput)||void 0===e?void 0:e.value.toLowerCase(),n=s&&(0,I.Wb)(s),r=this.hasSearchSuggested?5:10;let i=null!==(t=null===(a=this.state.searchHistoryByProfile)||void 0===a?void 0:a.terms)&&void 0!==t?t:[];const o=[];for(let e=0;e<i.length&&e<r;e++)i[e].includes(n)&&o.push({text:i[e],href:void 0});this.setState({searchHistory:o})}clearSearchHistory(){this.setState({searchHistoryByProfile:{terms:[],expirationDates:{}}})}clearSearchSuggestions(e=!0){this.killSearchSuggestionsFetch(),this.hasSearchSuggested=!1,this.setState({searchSuggested:[]}),e&&(this.hasSearchHistory=!1,this.setState({searchHistory:[]}))}fetchSearchSuggestions(e){const t=this;if(this.searchHistoryOn&&this.fetchSearchHistory(),e.length>=3){this.killSearchSuggestionsFetch();const a=window.setTimeout((async()=>{try{const a=await this.WPS.SearchSuggestions({phrase:e,context:this.props.context}),s=a?a.hasOwnProperty("suggestions")?a.suggestions:a:[];this.searchHistoryOn?t.setState({searchSuggested:s.slice(0,5)}):t.setState({searchSuggested:s})}catch(e){var a;null===(a=this.props.logger)||void 0===a||a.error("[atv_nav_iss_ajax_error]",e).count("AVNavIssAjaxErrors",1,!1)}}),200);this.setState({searchSuggestionsFetchHandle:a}),this.hasSearchSuggested=!0}else this.clearSearchSuggestions(!1)}}T(C,"defaultProps",{shouldCollapse:!1,searchFormAction:{partialURL:"",query:{}},searchFormPlaceholder:"",searchPhrase:"",altText:"",context:{},searchHistory:{treatment:"C",strings:{recent:"",suggested:"",clear:"",clearInfoTitle:"",clearInfoButton:"",clearInfoMessage:"",cancel:"",clearInfoAck:""}}});var b=a("./src/util/utils/history.ts"),G=a("./node_modules/@amzn/dvui/dist/Icon.js"),L=a("./node_modules/@amzn/dvui/dist/Callout.js");const H="nav-account-menu-opened",k=()=>{const e=document.getElementsByTagName("body")[0];e.classList.contains(H)?e.classList.remove(H):e.classList.add(H)};const w=e=>n.createElement(n.Fragment,null,e.activeProfile&&n.createElement("li",{className:"profile-item nav-profiles-menu-active-profile"},n.createElement("div",{style:{backgroundImage:`url(${e.activeProfile.avatarUrl})`},className:"profile-avatar"}),e.activeProfile.name),e.otherProfiles.map(((e,t)=>n.createElement("form",{className:"profile-item",id:`profile-${t}`,action:e.switchLink.partialURL,method:"POST"},n.createElement("input",{className:"profile-input-submit",type:"submit",id:`input-profile-${t}`,name:`input-profile-${t}`}),n.createElement("label",{htmlFor:`input-profile-${t}`},n.createElement("li",null,n.createElement("div",{style:{backgroundImage:`url(${e.avatarUrl})`},className:"profile-avatar"}),e.name)),Object.keys(e.switchLink.query).map((t=>n.createElement("input",{type:"hidden",name:t,value:e.switchLink.query[t]})))))),e.canCreate&&e.links.createProfileNav?n.createElement("li",{className:"profile-item add-new"},n.createElement("a",{href:e.links.createProfileNav},n.createElement("div",{className:"profile-avatar"}),e.strings.DV_PROFILES_MANAGE_ADD_NEW)):null,n.createElement("li",{id:"manage-profiles"},n.createElement("a",{href:e.links.manageProfile,className:"nav-profiles-menu-link"},e.strings.DV_PROFILES_MANAGE)),n.createElement("li",null,n.createElement("a",{href:e.links.learnMore,className:"nav-profiles-menu-link","aria-label":e.strings.DV_PROFILES_INTRO_LINK},e.strings.DV_PROFILES_LEARNMORE))),x=e=>{switch(e.tooltipType){case"ERROR":return n.createElement(n.Fragment,null,n.createElement("span",{className:"nav-profiles-tooltip-text"}," ",e.message," "));case"SWITCH_FAIL_OTHERS":return n.createElement(n.Fragment,null,n.createElement("span",{className:"nav-profiles-tooltip-text"}," ",e.strings.DV_PROFILES_GETCONTEXT_SWITCHING," "));case"SWITCH_FAIL_REAUTHENTICATION":return n.createElement(n.Fragment,null,n.createElement("span",{className:"nav-profiles-tooltip-text"}," ",e.strings.DV_PROFILES_SWITCHING_RE_AUTHENTICATION_ERROR," "));default:return n.createElement(n.Fragment,null)}};class D extends n.Component{constructor(e){var t,a,s;super(e),s=void 0,(a="profilesDropdownCheckbox")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s}componentDidMount(){if(window&&window.history){const e=new URL(window.location.href);e.searchParams.has("switchSuccess")&&(e.searchParams.delete("switchSuccess"),(0,b.lO)(null,document.title,e.href))}}render(){const e="ERROR"!=this.props.tooltipType&&this.props.activeProfile?n.createElement("div",{style:{backgroundImage:`url(${this.props.activeProfile.avatarUrl})`},className:"profile-avatar"}):n.createElement(G.Icon,{use:G.IconType.ALERT_CRITICAL_BLOCK,className:"profile-avatar profile-error"});return n.createElement(n.Fragment,null,n.createElement("input",{type:"checkbox",className:"nav-profiles-dropdown",onChange:k,name:"nav-menu",id:"nav-profiles-dropdown",defaultChecked:!1,ref:e=>{e&&(this.profilesDropdownCheckbox=e)}}),n.createElement("label",{id:"nav-profiles-dropdown-label",htmlFor:"nav-profiles-dropdown",className:g("pv-nav-dropl__label",{"pv-nav-error-label":"ERROR"==this.props.tooltipType})},this.props.tooltipType?n.createElement("span",{onClick:()=>{this.profilesDropdownCheckbox&&(this.profilesDropdownCheckbox.checked=!this.profilesDropdownCheckbox.checked)}},n.createElement(L.Callout,{startOpen:!0,size:"m",position:"bottom",content:x(this.props),use:"error",className:`nav-profiles-tooltip nav-profiles-tooltip-${this.props.tooltipType.toLowerCase()}`},e)):e,n.createElement("div",{className:"label-content"},n.createElement("span",{className:"profiles-dropdown-whos-watching"},this.props.strings.DV_PROFILES_WW),n.createElement("span",{className:"profiles-dropdown-name",dir:"auto"},this.props.activeProfile?this.props.activeProfile.name:""))))}}function M(){return M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},M.apply(this,arguments)}const U=({links:e,localeSelectionSubMenu:t,cerberus:a,strings:s,context:r})=>{const i=e.slice();t&&i.splice(t.dropdownIndex,0,t);const o=i.map((e=>e.link||e.locales?n.createElement(p,{locales:e.locales,removeIcon:!1,languages:e.languages,languageToken:e.languageToken,text:e.text||"",key:e.text,context:r}):n.createElement("li",{key:e.text,role:"menuitem"},n.createElement(_.Link,M({},e,{key:e.text})))));return a?n.createElement("ul",{role:"menu"},n.createElement("div",{className:"pv-nav-dropl-column nav-profiles-menu"},n.createElement("span",{className:"pv-accounts-cerberus-heading"}," ",(null==s?void 0:s.Profiles)||"Profiles"," "),n.createElement(w,a)),n.createElement("div",{className:"pv-nav-dropl-column pv-nav-dropl-column-left"},n.createElement("span",{className:"pv-accounts-cerberus-heading"}," ",(null==s?void 0:s.More)||"More"," "),o)):n.createElement("ul",{role:"menu"},o)},F=e=>n.createElement("span",null,e.pre&&n.createElement("div",{className:"pv-nav-pre-text"},e.pre),n.createElement(_.Link,e),e.post&&n.createElement("div",{className:"pv-nav-post-text"},e.post)),W=({link:e,dropdownExists:t})=>t?n.createElement("span",{className:"pv-nav-link-with-droplist"},n.createElement(F,e)):n.createElement(F,e);class B extends n.Component{constructor(e){super(e),this.state={checked:!1,triggered:!1}}render(){const{links:e,localeSelectionSubMenu:t,altText:a,cerberus:s,strings:r,context:i}=this.props,o=s?n.createElement("div",{className:"pv-nav-accounts-cerberus nav-profiles pv-nav-dropl",id:"pv-nav-accounts-cerberus"},n.createElement(D,s),n.createElement(U,{links:e,localeSelectionSubMenu:t,cerberus:s,strings:r,context:i})):n.createElement("div",{className:"pv-nav-accounts pv-nav-dropl",id:"pv-nav-accounts"},n.createElement("input",{onChange:k,type:"checkbox",autoComplete:"off",name:"pv-nav-accounts",id:"pv-nav-accounts-menu-trigger",className:"pv-nav-dropl__input avu-screen-reader-only"}),n.createElement("label",{htmlFor:"pv-nav-accounts-menu-trigger",className:"pv-nav-dropl__label"},n.createElement("span",{className:"pv-nav-account-icon"},a)),n.createElement(U,{links:e,localeSelectionSubMenu:t,context:i}));return n.createElement(n.Fragment,null,o)}}const Y=({links:e,localeSelectionSubMenu:t,altText:a,vtr:s,cerberus:r,strings:i,context:o})=>1===e.length?n.createElement("span",{className:"pv-nav-accounts-single-link"},n.createElement(W,{link:e[0],dropdownExists:Boolean(t)}),t&&n.createElement(B,{links:Array(e[0]),localeSelectionSubMenu:t,altText:a,cerberus:r,strings:i,context:o})):n.createElement(B,{links:e,localeSelectionSubMenu:t,vtr:s,altText:a,cerberus:r,strings:i,context:o}),j=({text:e,href:t})=>n.createElement("div",{className:"pv-nav-sign-up-button"},n.createElement(R.PrimeButton,{href:t,className:"CTA-button"},e));function $(){return $=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},$.apply(this,arguments)}a("./src/widgets/Explore/Nav/Nav/index.module.scss"),a("./src/widgets/Explore/Nav/Nav/scripts/nav.ts");const K={name:"nav",getProps:undefined,Component:(0,r.s6)((0,i.ty)((({logo:e,mainMenu:t,searchBar:a,yourAccount:s,cerberus:r,localeSelector:i,context:o,signUpCTA:l,logger:c})=>{var v;const p=r?"pv-nav-cerberus":"",m="CHILD"===(null==r||null===(v=r.activeProfile)||void 0===v?void 0:v.ageGroup)?"pv-nav-cerberus-kids":"";return n.createElement("div",{className:`pv-nav-container ${p} ${m}`},n.createElement(d,e),n.createElement("div",{className:"pv-nav-primary-components"},t?n.createElement(A,t):n.createElement(V,null),a&&n.createElement(C,$({},a,{logger:c,context:o,profiles:r})),l&&n.createElement(j,l),i&&n.createElement(h,i),s&&n.createElement(Y,$({},s,{vtr:o.currentTerritory,cerberus:r,context:o}))))}))),container:{tagName:"header",ID:"pv-nav",classes:["pv-nav","av-blur-backdrop"]}};(0,s.y)(K)},"./src/widgets/Explore/Nav/Nav/scripts/nav.ts":()=>{if(void 0!==window.navigator&&window.navigator.userAgent.indexOf("Firefox")>-1||window.navigator.userAgent.indexOf("Edge")>-1||window.navigator.userAgent.indexOf("MSIE")>-1){var e=document.getElementById("pv-nav-locales-menu-trigger"),t=document.getElementById("pv-nav-accounts-menu-trigger"),a=document.getElementById("av-search-nav");e&&t&&(t.addEventListener("click",(function(){t.checked&&(e.checked=!1)})),e.addEventListener("click",(function(){e.checked&&(t.checked=!1)}))),a&&a.addEventListener("click",(function(){e&&e.checked&&(e.checked=!1),t&&t.checked&&(t.checked=!1)}))}},"./src/widgets/Explore/Nav/Nav/index.module.scss":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});const s={"nav-asset-v1-0-0-12":"_3h3lwI"}}},a={};function s(e){var n=a[e];if(void 0!==n)return n.exports;var r=a[e]={exports:{}};return t[e].call(r.exports,r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,a,n,r)=>{if(!a){var i=1/0;for(v=0;v<e.length;v++){for(var[a,n,r]=e[v],o=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every((e=>s.O[e](a[l])))?a.splice(l--,1):(o=!1,r<i&&(i=r));if(o){e.splice(v--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var v=e.length;v>0&&e[v-1][2]>r;v--)e[v]=e[v-1];e[v]=[a,n,r]},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.j=5411,(()=>{var e={5411:0};s.O.j=t=>0===e[t];var t=(t,a)=>{var n,r,[i,o,l]=a,c=0;if(i.some((t=>0!==e[t]))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)var v=l(s)}for(t&&t(a);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[i[c]]=0;return s.O(v)},a=self.webpackChunk_amzn_dvwebnode=self.webpackChunk_amzn_dvwebnode||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=s.O(void 0,[1216,9351],(()=>s("./src/entrypoints/hydration/nav.tsx")));n=s.O(n)})();
//# sourceMappingURL=http://sourcemaps.aka.amazon.com/69ac1492aee3c253a952c151f9e963e6d522f02709d84c1f85445214b0e907b0368b8cbd6354f244a8ef45d29ec6c1cb45c27c646eedb7a785fc719bdffc29f0ff4302ee860b90877d36ada4b079ed370b470f04195c99088ad1d50ed6a90cd13a8048cb191497d3769eed84bfed54d873c5369938fe198adacb9d8411a31b04ea1c66f1890d5c3f889613678151265836013a85b5f0f006df4993d518ad9ebf6786002172e8d4db895a233fdb495bbaebb36c4e49b6f4cea8b5e0a00bd7fb48ecaf5ec2b4ce83af1ff1d124b96ab967d6bc833b1074439d4c46a489e7f7771e208103a63ea5afb21043bd37ae00991cf541ca0dae00b48d29fc1f524e354fa0