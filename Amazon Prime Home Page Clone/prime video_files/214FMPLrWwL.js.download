P.register("cvfVersion",function(){P.when("A","cvfFormDataGenerator","ready").register("cvf-account-switcher",function(b,e){function a(a,k){a.preventDefault();var c=e.retrieveFormData(a.target),d=c.inputData.serializeArray();d.push(h(a.target));b.ajax(window.location.protocol+"//"+window.location.host+c.requestPath,{method:"POST",params:d,success:k,error:g})}function h(a){a=c(a);var k=a.attr("name");k||(k=a.closest(".cvf-account-switcher-sign-out-link").attr("data-name"));var b=a.attr("value");b||
(b=a.closest(".cvf-account-switcher-sign-out-link").attr("data-value"));return{name:k,value:b}}function g(a,k,c){b.trigger(l.error,c)}function d(a){a=/([^@\s]+)@([a-zA-Z0-9_-]+)(\.[a-zA-Z0-9._-]+)/ig.exec(a);var k;k=a[1];var b=k.length;if(1!==b){for(var c=k.charAt(0),d=0;d<b-2;d++)c+="*";k=c+=k.charAt(b-1)}k+="@";c=a[2];b=c.length;c=c.charAt(0);for(d=0;d<b-1;d++)c+="*";return k+c+a[3]}function m(){0===c(".cvf-account-switcher-check-mark:visible").length&&c(".cvf-account-switcher-check-mark-area").remove()}
var c=b.$,l={success:"cvf:account_switcher:success",error:"cvf:account_switcher:error"};(function(){var a=c("#ap-account-switcher-container")[0],b=window.MutationObserver||window.WebKitMutationObserver;if(void 0!==a&&void 0!==b){var d=new b(function(a){a.forEach(function(a){null!==a.addedNodes&&(m(),d.disconnect())})});d.observe(a,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}})();(function(){c(".cvf-account-switcher-sign-out-link").live("click",function(e){a(e,function(a){if(a.succeeded){var h=
"."+c(e.target).attr("class").match(/cvf-account-switcher-account-group-\w+/g)[0];c(h+"-hide").hide();c(h+"-name").text(c("#cvf-account-switcher-sign-out-replace-text").text());c(h+"-claim").text(d(c(h+"-claim").text()));c(h+"-image").replaceWith(c("\x3cdiv /\x3e").append(c("#cvf-account-switcher-sign-out-replace-image").clone().removeClass("cvf-hidden")).html());c(h+"-button").removeClass("cvf-widget-btn-val cvf-widget-btn-verify-account-switcher");a=a.switchedAccountId;void 0!==a&&(a=".cvf-account-switcher-account-group-"+
a,c(a+"-check-mark").show(),c(a+"-button").removeClass("cvf-widget-btn-val cvf-widget-btn-verify-account-switcher"));m()}else a.redirectUrl?window.location=a.redirectUrl:b.trigger(l.error,a)})})})()});"use strict";P.when("A","cvfVersion","cvfFormDataGenerator","ready").register("cvf",function(b,e,a){function h(h){function k(a){f.options.spinnerTarget&&f.options.spinnerTarget.hide();a.hasOwnProperty("error")?b.trigger(p.error,a.error):a.redirectUrl?window.location=a.redirectUrl:a.redirect?(b.trigger(p.success,
a.token,a.status,a.redirect),f.options.autoDestroy?f.destroy():(d(".cvf-widget-alert").hide(),a.status?d(".cvf-widget-status-success").show():d(".cvf-widget-status-error").show(),u()),b.trigger("cvf:verification:complete",a.status),n.find(".cvf-widget-btn").unbind("click",e),n.find(".cvf-widget-btn-val").unbind("click",e),b.off(p.success),b.off(p.error)):(n.html(a.replace(/<form/g,"\x3cdiv").replace(/<\/form/g,"\x3c/div")),q())}function e(c,h){c.preventDefault();d(".cvf-widget-alert").hide();f.options.spinnerTarget&&
f.options.spinnerTarget.show();var g=a.retrieveFormData(c.target),l=g.inputData.serializeArray();h&&l.push(a.getNameValue(c.target));b.ajax(r+g.requestPath,{method:"POST",params:l,success:k,error:v})}function g(a){13===a.keyCode&&e(a)}function q(){n.find(".cvf-widget-btn").click(function(a){e(a,!1)});n.find(".cvf-widget-btn-val").click(function(a){e(a,!0)});n.find('input[name\x3d"code"]').focus().keypress(g)}function w(a){return function(c,d,h){"timeout"!==d||3<=t?b.trigger(p.error,h):b.delay(a,10*
t++)}}function v(a,c,d){f.options.spinnerTarget&&f.options.spinnerTarget.hide();b.trigger(p.error,d)}function u(){d.each(n.find("input"),function(a,c){var b=d(c);b.attr("disabled","disabled");b.hasClass("a-input-text")?b.addClass("a-form-disabled"):b.hasClass("a-button-input")?b.closest(".a-button").addClass("a-button-disabled"):b.closest(".a-input-text-wrapper").length&&b.closest(".a-input-text-wrapper").addClass("a-form-disabled")});d.each(n.find("a"),function(a,c){var b=d(c);b.hasClass("cvf-widget-link-disable-target")&&
b.addClass("cvf-link-disabled")})}var f=this;c++;var p={success:"cvf:"+c+":success",error:"cvf:"+c+":error"};f.options={};d.extend(f.options,m,h);(function(a){if(1!==d(a.target).length)throw Error("The CVF widget requires a unique element.");if(!d.isFunction(a.onSuccess))throw Error("The CVF widget requires a success callback function.");if(!d.isFunction(a.onError))throw Error("The CVF widget requires an error callback function.");})(f.options);var r=f.options.server,n=d(f.options.target);b.on(p.success,
f.options.onSuccess);b.on(p.error,f.options.onError);f.start=function(){if(0===d.trim(f.options.requestToken).length)throw Error("The CVF widget requires a request token.");b.ajax(r+"/ap/cvf/request.embed?requestToken\x3d"+f.options.requestToken,{method:"GET",params:l,success:k,error:w(f.start)})};f.destroy=function(){n.html("")};q();var t=0;f.options.autoStart&&f.start()}function g(a){return new h(a)}var d=b.$,m={server:"",target:void 0,requestToken:void 0,onSuccess:void 0,onError:void 0,spinnerTarget:void 0,
autoStart:!0,autoDestroy:!0},c=0,l=[{name:"CVFVersion",value:e.version},{name:"AUIVersion",value:P.AUI_BUILD_DATE}];b.on("cvf:verification:request",function(a){var c=d("#"+a),h=c.data("token"),e=c.data("spinnerId"),e=d("#"+e);g({target:c,spinnerTarget:e,requestToken:h,onSuccess:function(c,d,h){b.trigger("cvf:verification:complete:"+a,c,d,h)},onError:function(c){b.trigger("cvf:verification:error:"+a,c)},autoStart:!0,autoDestroy:!1})});return{create:g}});"use strict";P.when("A","cvf","ready").execute(function(b,
e){var a=b.$;a(document).ready(function(){function b(a,c,d){window.location=d;console.log("Client Side: "+a)}function g(a){console.log(a)}var d=a(".cvf-widget-spinner"),m=a("#cvf-widget-content");if(1===m.length){var c=a('[name\x3d"requestToken"]').first().attr("value");e.create({target:m,spinnerTarget:d,requestToken:c,onSuccess:b,onError:g,autoStart:!1})}})});"use strict";P.when("A").execute(function(b){b.declarative("auth-popup","click",function(b){var a=b.data;b=b.$target.closest("a")[0];(a=window.open(b.href,
b.target,a.windowOptions))&&a.focus()})});"use strict";P.when("A","cvfFormDataGenerator","ready").execute(function(b,e){});"use strict";P.when("A","cvfFormDataGenerator","ready").execute(function(b,e){var a=b.$;a(".cvf-widget-btn-val").click(function(b){var g=a(b.target).closest(".cvf-widget-form");b=e.getNameValue(a(b.target));g.append('\x3cinput type\x3d"hidden" name\x3d"'+b.name+'" value\x3d"'+b.value+'"\x3e').submit()})});"use strict";P.when("A","ready").register("cvfFormDataGenerator",function(b){var e=
b.$;return{retrieveFormData:function(a){a=e(a).closest(".cvf-widget-form");return{requestPath:a.data("use-only-form-action")?a.attr("action"):"/ap/cvf/"+a.attr("action")+".embed",inputData:a.find(".cvf-widget-input,.cvf-widget-hidden-fields,.cvf-widget-input :input"),form:a}},getNameValue:function(a){a=e(a);var b=a.attr("name");b||(b=a.closest(".cvf-widget-btn-val").attr("data-name"));var g=a.attr("value");g||(g=a.closest(".cvf-widget-btn-val").attr("data-value"));return{name:b,value:g}}}});"use strict";
P.when("A","ready").register("codeResendTimer",function(b){function e(a,e,g){var d=(new Date).getTime(),m=setInterval(function(){var c=(new Date).getTime()-d,c=a-c;if(0>=c)clearInterval(m),b.$("#timer").html(g);else{var c=Math.floor(c/1E3),l=e.split(" +timeleft+ "),c=l[0].split('"').join("")+c+l[1].split('"').join("");b.$("#timer").html(c)}},100)}return{createTimer:function(a,b,g){return new e(a,b,g)}}});return{version:"0.1.0.0-2022-04-07"}});