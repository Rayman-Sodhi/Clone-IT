let data = [
  {
    brand: "Puma",
    name: "selena floral FileList",
    price: "2000",
    size: "X,XX,XXL",
    productID: "women1",
    catagory: "Casual",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/t/w/twentydressesmix_dr0935_1_984da863.jpg?rnd=20200526195200",
  },
  {
    brand: "Gap",
    name: "balck bella",
    price: "1347",
    size: "X,M,L,XX,XXL",
    productID: "women2",
    catagory: "festive",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/1/4/146117301_1_7fcd0574.jpg?rnd=20200526195200",
  },
  {
    brand: "Puma",
    name: "chil pill supersoft palysuit",
    price: "799",
    size: "M,L,XX,XXS",
    productID: "women3",
    catagory: "party",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/c/achwsivc466_1_a6c9da54.jpg?rnd=20200526195200",
  },
  {
    brand: "Gap",
    name: "plus size womens",
    price: "2000",
    size: "X,M,L,XXS,XXL",
    productID: "women4",
    catagory: "formal",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/i/n/ind158-pnk_1_3dc181e4.jpg?rnd=20200526195200",
  },
  {
    brand: "Bady Moo",
    name: "balck bella",
    price: "1347",
    size: "X,M,L",
    productID: "women5",
    catagory: "workout",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/p/h/pheeta-pht0067_1_96256fbd.jpg?rnd=20200526195200",
  },
  {
    brand: "Pepe jeans",
    name: "plus size womens",
    price: "979",
    size: "XXS,M,L",
    productID: "women6",
    catagory: "travel",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/o/_/o_228327501_1_857abfa6.jpg?rnd=20200526195200",
  },
  {
    brand: "Puma",
    name: "chil pill supersoft palysuit",
    price: "2000",
    size: "XXL,M,L",
    productID: "women7",
    catagory: "sports",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/t/w/twentydressesmix_dr0769_1_90caf4b3.jpg?rnd=20200526195200",
  },
  {
    brand: "Gap",
    name: "chil pill supersoft palysuit",
    price: "1347",
    size: "X,M,L,XX",
    productID: "women8",
    catagory: "Casual",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/k/a/kazo-123019black_1_85f6e006.jpg?rnd=20200526195200",
  },
  {
    brand: "Bady Moo",
    name: "balck bella",
    price: "976",
    size: "XS,M,L,XX",
    productID: "women9",
    catagory: "festive",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/r/t/rtor0011_1_67335460.jpg?rnd=20200526195200",
  },
  {
    brand: "Gap",
    name: "woman cotton off white",
    price: "456",
    size: "X,L,XX",
    productID: "women10",
    catagory: "party",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/h/ahtufrgfe19523_1_e0416277.jpg?rnd=20200526195200"
  },
  {
    brand: "Bee bay",
    name: "woman cotton off white",
    price: "986",
    size: "M,L,XXS",
    productID: "women11",
    catagory: "formal",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/c/achwkea595-1_dc090828.jpg?rnd=20200526195200",
  },
  {
    brand: "Kaniroot",
    name: "chill pill supersoft",
    price: "567",
    size: "S,M,L,XXl",
    productID: "women12",
    catagory: "workout",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/2/3/238451501_1_43bf9c90.jpg?rnd=20200526195200",
  },
  {
    brand: "Bee bay",
    name: "Curev multi-Color",
    price: "765",
    size: "S,X,L,XXl",
    productID: "women13",
    catagory: "travel",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/r/t/rtor0011_1_67335460.jpg?rnd=20200526195200",
  },
  {
    brand: "Gap",
    name: "Mega striple",
    price: "9999",
    size: "S,M,X,XXL",
    productID: "women14",
    catagory: "sports",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/o/_/o_119512401_1_e2d71be7.jpg?rnd=20200526195200",
  },
  {
    brand: "Puma",
    name: "balck bella",
    price: "1347",
    size: "S,M,X,XXL",
    productID: "women15",
    catagory: "Casual",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/1/4/146117301_1_7fcd0574.jpg?rnd=20200526195200",
  },
  {
    brand: "Kaniroot",
    name: "chil pill supersoft palysuit",
    price: "799",
    size: "S,M,L,XXL",
    productID: "women16",
    catagory: "festive",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/c/achwsivc466_1_a6c9da54.jpg?rnd=20200526195200",
  },
  {
    brand: "Puma",
    name: "plus size womens",
    price: "2000",
    size: "S,XX",
    productID: "women17",
    catagory: "party",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/i/n/ind158-pnk_1_3dc181e4.jpg?rnd=20200526195200",
  },
  {
    brand: "Gap",
    name: "balck bella",
    price: "1347",
    size: "S,M,XX,XXL",
    productID: "women18",
    catagory: "formal",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/p/h/pheeta-pht0067_1_96256fbd.jpg?rnd=20200526195200",
  },
  {
    brand: "Bee bay",
    name: "plus size womens",
    price: "979",
    size: "M,XXL,XX",
    productID: "women19",
    catagory: "workout",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/o/_/o_228327501_1_857abfa6.jpg?rnd=20200526195200",
  },
  {
    brand: "Puma",
    name: "chil pill supersoft palysuit",
    price: "2000",
    size: "M,X,L,XXL",
    productID: "women20",
    catagory: "travel",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/t/w/twentydressesmix_dr0769_1_90caf4b3.jpg?rnd=20200526195200",
  },
  {
    brand: "Puma",
    name: "chil pill supersoft palysuit",
    price: "1347",
    size: "M,L,XXL",
    productID: "women21",
    catagory: "sport",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/k/a/kazo-123019black_1_85f6e006.jpg?rnd=20200526195200",
  },
  {
    brand: "Gap",
    name: "balck bella",
    price: "976",
    size: "S,XX",
    productID: "women22",
    catagory: "Casual",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/r/t/rtor0011_1_67335460.jpg?rnd=20200526195200",
  },
  {
    brand: "Puma",
    name: "woman cotton off white",
    price: "456",
    size: "XXL",
    productID: "women23",
    catagory: "festive",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/h/ahtufrgfe19523_1_e0416277.jpg?rnd=20200526195200"
  },
  {
    brand: "Gap",
    name: "woman cotton off white",
    price: "986",
    size: "S,X,L",
    productID: "women24",
    catagory: "party",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/a/c/achwkea595-1_dc090828.jpg?rnd=20200526195200",
  },
  {
    brand: "Kaniroot",
    name: "chill pill supersoft",
    price: "567",
    size: "S,XXL,XX",
    productID: "women25",
    catagory: "formal",
    img: "https://adn-static1.nykaa.com/nykdesignstudio-images/tr:w-550,/pub/media/catalog/product/2/3/238451501_1_43bf9c90.jpg?rnd=20200526195200",
  },
];
if (localStorage.getItem("nykaa-product") == null) {
  localStorage.setItem("nykaa-product", JSON.stringify({}));
}
let parent = document.getElementById("products");

let slidermin=document.getElementById("slidermin");
let slidermax=document.getElementById("slidermax");
let sliderapply=document.getElementById("sliderapply");

let sliderminValue=null;
let slidermaxValue=null;

let objFilters = {
  Brands: [false, false, false, false, false, false],
  Occassion: [false, false, false, false, false, false, false],
  Sizes: [false, false, false, false, false, false]

}

function ShowProducts(data) {
  parent.innerHTML = null;
  data.filter(function(el){return FilterOccation(el)}).filter(function(el){return FilterBrands(el)}).filter(function(el){return FilterSizes(el)}).filter(function(el){return FilterPrices(el)}).forEach(element => {
    let card = document.createElement("div");
    card.setAttribute("class", "card");

    let img = document.createElement("div");
    img.setAttribute("class", "card-img");
    img.style.backgroundImage = `url(${element.img})`
    card.appendChild(img);

    let text = document.createElement("div");
    text.setAttribute("class", "card-text");
    let h4 = document.createElement("h4");
    h4.textContent = element.brand.toUpperCase();
    text.appendChild(h4);

    let p = document.createElement("p");
    p.textContent = element.name;
    p.setAttribute("class", "card-text-detail")
    text.appendChild(p);

    let p2 = document.createElement("p");
    p2.textContent = "$" + element.price;
    p2.setAttribute("class", "card-text-price")
    text.appendChild(p2);
    card.appendChild(text);
    card.addEventListener("click", function () { ProductPageLoad(element) });
    parent.appendChild(card);
  });
}
ShowProducts(data);
function ProductPageLoad(product) {
  localStorage.setItem("nykaa-product", JSON.stringify(product));
  window.location.href = "../ProductDetails/Product.html";
}
if (localStorage.getItem("nykaa-women-page-data") == null) {
  localStorage.setItem("nykaa-women-page-data", JSON.stringify(data));
}

let Occassion = [
  document.getElementById("Occassion-casual"),
  document.getElementById("Occassion-festive"),
  document.getElementById("Occassion-party"),
  document.getElementById("Occassion-formal"),
  document.getElementById("Occassion-workout"),
  document.getElementById("Occassion-travel"),
  document.getElementById("Occassion-sport"),
]


let Brands = [
  document.getElementById("brand-gap"),
  document.getElementById("brand-baby-moo"),
  document.getElementById("brand-kanitroot"),
  document.getElementById("brand-beebay"),
  document.getElementById("brand-pepe-jeans"),
  document.getElementById("brand-puma")
]

let Sizes = [
  document.getElementById("brand-xxs"),
  document.getElementById("brand-baby-xs"),
  document.getElementById("brand-s"),
  document.getElementById("brand-m"),
  document.getElementById("brand-l"),
  document.getElementById("brand-xl")
]
function AddOnChange(arr, key) {
  arr.forEach(function (element, index) {
    element.addEventListener("change", function () { AddingFilterList(key, element.checked, index) })
  })
}
AddOnChange(Occassion, "Occassion");
AddOnChange(Brands, "Brands");
AddOnChange(Sizes, "Sizes");
function AddingFilterList(key, value, index) {
  objFilters[key][index] = value;
  ShowProducts(data);
  
}

function indexToOccation(arr2) {
  let arr = [];
  arr2.forEach((element, i)=> {
    if (element) {
      switch (i) {
        case 0:
          arr.push("Casual");
          break;
        case 1:
          arr.push("festive");
          break;
        case 2:
          arr.push("party");
          break;
        case 3:
          arr.push("formal");
          break;
        case 4:
          arr.push("workout");
          break;
        case 5:
          arr.push("travel");
          break;
        case 6:
          arr.push("sport");
          break;
      }
    }
  });
  return arr;
}
function indexToBrand(arr2) {
  let arr = [];
  arr2.forEach((element, i)=> {
    if (element) {
      switch (i) {
        case 0:
          arr.push("Gap");
          break;
        case 1:
          arr.push("Bady Moo");
          break;
        case 2:
          arr.push("Kanitroot");
          break;
        case 3:
          arr.push("Bee bay");
          break;
        case 4:
          arr.push("Pepe Jeans");
          break;
        case 5:
          arr.push("Puma");
          break;
      }
    }
  });
  return arr;
}
function indexToSize(arr2) {
  let arr = [];
  arr2.forEach((element, i) => {
    if (element) {
      switch (i) {
        case 0:
          arr.push("XXS");
          break;
        case 1:
          arr.push("XS");
          break;
        case 2:
          arr.push("S");
          break;
        case 3:
          arr.push("M");
          break;
        case 4:
          arr.push("L");
          break;
        case 5:
          arr.push("XL");
          break;
      }
    }
  });
  return arr;
}

function FilterOccation(element){
  let arr=indexToOccation(objFilters.Occassion);
  let found=false;
  if(arr.length===0){
    found=true;
  }
  else if(arr.length>0){
    arr.forEach(function(el){
      if(el==element.catagory){
        found=true;
      }
    })
  }
  return found;
}
function FilterBrands(element){
  let arr=indexToBrand(objFilters.Brands);
  let found=false;
  if(arr.length===0){
    found=true;
  }
  else if(arr.length>0){
    arr.forEach(function(el){
      if(el==element.brand){
        found=true;
      }
    })
  }
  return found;
}
function FilterSizes(element){
  let arr=indexToSize(objFilters.Sizes);
  let found=false;
  if(arr.length===0){
    found=true;
  }
  else if(arr.length>0){
    arr.forEach(function(el){
      if(element.size.trim().split(",").includes(el)){
        found=true;
      }
    })
  }
  return found;
}
sliderapply.addEventListener("click",function(){
 if(slidermin.value !=null && slidermax.value !=null && slidermin.value !="" && slidermax.value !=""){
  sliderminValue=Number(slidermin.value);
  slidermaxValue=Number(slidermax.value);
  ShowProducts(data);
 }
})

function FilterPrices(element){
   if(Number.isNaN(sliderminValue)==false && Number.isNaN(slidermaxValue)==false &&  sliderminValue !=null && slidermaxValue !=null){
       return Number(element.price)>= sliderminValue && Number(element.price)<= slidermaxValue;
   }else{
     return element.price != null;
   }
}